(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[26],{1394:function(e,t,n){"use strict";var a=n("4a2e"),o=n.n(a);o.a},"4a2e":function(e,t,n){},"5beb1":function(e,t,n){"use strict";var a=n("e381"),o=n.n(a);o.a},"9de1":function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("toolbar-page",{attrs:{elements:e.elements,default:"students"}})},o=[],s=n("08e9"),c=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("q-tree",{staticClass:"q-mt-lg",attrs:{nodes:e.tree,color:"accent","default-expand-all":"","node-key":"id","label-key":"name",dark:""},scopedSlots:e._u([{key:"default-header",fn:function(t){return n("div",{on:{click:function(n){return e.clickNode(t.node)}}},[n("span",{staticClass:"text-weight-thin no-shadow"},[t.node.newCat||t.node.newTag?e._e():n("q-icon",{staticClass:"q-mt-xs q-mr-xs q-ml-sm",attrs:{name:"fal fa-tag",color:e.nodeColor(t.node)}}),t.node.newCat?n("new-button",{staticClass:"q-mt-xs q-mr-xs q-ml-sm",attrs:{color:e.nodeColor(t.node),success:e.newCat}}):e._e(),t.node.newTag?n("new-button",{staticClass:"q-mt-xs q-mr-xs q-ml-sm",attrs:{color:e.nodeColor(t.node),success:e.newTag}}):e._e()],1),n("span",[e._v("\n         "+e._s(t.node.name)+"\n       ")])])}}])})],1)},r=[],i=(n("c880"),n("47783")),d={getStudentTagTree(e,t,n){i["a"].get("/admin/tags/tree/students/"+n).then((function(t){e(t.data)})).catch((function(e){console.log(e)}))},getTags(e,t,n){i["a"].get("/admin/tags").then((function(t){e(t.data)})).catch((function(e){console.log(e)}))},getCategories(e,t,n){i["a"].get("/admin/tags/categories").then((function(t){e(t.data)})).catch((function(e){console.log(e)}))},postCategory(e,t,n){i["a"].post("/admin/tags/categories",{name:n}).then((function(t){e(t.data)})).catch((function(e){console.log(e)}))},postTag(e,t,n,a){i["a"].post("/admin/tags/tag",{catName:n,name:a}).then((function(t){e(t.data)})).catch((function(e){console.log(e)}))},getTag(e,t,n){i["a"].get("/admin/tags/"+n.id).then((function(t){e(t.data)})).catch((function(e){console.log(e)}))},putTag(e,t,n){i["a"].put("/admin/tags",n).then((function(t){e(t.data)})).catch((function(e){console.log(e),t()}))},deleteTag(e,t,n){i["a"].delete("/admin/tags/"+n).then((function(t){e(t.data)})).catch((function(e){console.log(e)}))}},l=n("ad81"),u={name:"AdminTagsStudents",data(){return{tree:[],currentNodeId:null,currentCatId:null}},methods:{process(e){console.log(e),this.tree=e.map((function(e){return e.tags.unshift({newTag:!0,name:"",id:"nt_"+e.id,catName:e.name,catId:e.id}),{id:"c"+e.id,name:e.name,children:e.tags,catId:e.id}})),this.tree.unshift({newCat:!0,name:"",id:"c0"}),console.log(this.tree)},newCat(e){if(0===e.length)return!1;d.postCategory(this.fetchTree,this.$errorHandler,e)},newTag(e){if(0===e.length)return!1;console.log(this.currentCatName),d.postTag(this.fetchTree,this.$errorHandler,this.currentCatName,e)},clickNode(e){console.log(e),e.catId&&(this.currentNodeId=e.id,this.currentCatId="c"+e.catId,e.catName.length>0&&(this.currentCatName=e.catName),console.log(this.currentCatName))},nodeColor(e){return e.catId?e.id===this.currentNodeId?"accent":"white":e.id===this.currentCatId?"accent":"white"},fetchTree(){d.getStudentTagTree(this.process,null,0)}},computed:{},components:{NewButton:l["a"]},created(){this.fetchTree()}},m=u,g=(n("5beb1"),n("2be6")),h=n("5840"),f=n("34ff"),p=n("e279"),C=n.n(p),w=Object(g["a"])(m,c,r,!1,null,"397508f5",null),T=w.exports;C()(w,"components",{QTree:h["a"],QIcon:f["a"]});var b=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("crud",{ref:"crud",attrs:{data:e.data,api:e.api,columns:e.columns,search:"",canNew:"",canDelete:"",canEdit:"",inlineEdit:""}})],1)},N=[],q=n("d612"),v=n("89a2"),_={name:"ComponentCompanies",data(){return{api:{get:d.getTags,getSingle:d.getTag,put:d.putCompanies,post:d.postCompanies,delete:d.deleteCompanies},columns:[{name:"id",label:"id",field:"id",type:"string",align:"left",hidden:!0},{name:"Name",label:"Name",field:"name",type:"string",align:"left",validations:{required:v["required"],minLength:Object(v["minLength"])(4)},editable:!0}],showForm:!0}},computed:{},components:{Crud:q["a"]},created(){}},I=_,x=(n("1394"),n("e81c")),k=Object(g["a"])(I,b,N,!1,null,"d1c2763a",null),y=k.exports;C()(k,"components",{QDialog:x["a"]});var S={name:"PageAdminTags",data(){return{elements:[{name:"students",label:"Students",component:T,shortcut:"s"},{name:"staff",label:"Staff",component:y,shortcut:"t"}]}},components:{toolbarPage:s["a"]},methods:{refresh(){}}},E=S,$=Object(g["a"])(E,a,o,!1,null,null,null);t["default"]=$.exports},e381:function(e,t,n){}}]);