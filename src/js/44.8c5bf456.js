(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[44],{"1e83":function(e,t,a){"use strict";var s=a("74d9"),o=a.n(s);o.a},"74d9":function(e,t,a){},"90b2e":function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"col column fit q-pl-xs"},[a("q-page",{staticClass:"no-scroll full-height full-width toolbar-page fixed q-pr-xl"},[a("div",{staticClass:"row shrink flex items-center q-mr-xl"},[a("year-bar",{staticClass:"ybx-border q-ma-xs"}),a("q-btn-toggle",{staticClass:" no-shadow q-mr-md bd-font-secondary ",staticStyle:{height:"26px"},attrs:{spreadx:"","no-caps":"",densex:"","toggle-color":"tertiary",color:"secondary","text-color":"font-secondary","toggle-text-color":"positive",options:[{label:"TAGS",value:"tag"},{label:"MAGS",value:"meg"}],size:"sm"},model:{value:e.grade,callback:function(t){e.grade=t},expression:"grade"}}),a("q-space"),a("q-toggle",{staticClass:"text-font",attrs:{color:"accent",label:"Ucas Firm"},model:{value:e.showHigh,callback:function(t){e.showHigh=t},expression:"showHigh"}}),a("q-toggle",{staticClass:"text-font",attrs:{color:"accent",label:"Ucas Insurance"},model:{value:e.showLow,callback:function(t){e.showLow=t},expression:"showLow"}}),a("q-toggle",{staticClass:"text-font",attrs:{color:"accent",label:"Flagged"},model:{value:e.filterFlagged,callback:function(t){e.filterFlagged=t},expression:"filterFlagged"}})],1),a("overview",{staticClass:"full-height no-scroll",attrs:{grade:e.grade,showMeta:e.showMeta,filterFlagged:e.filterFlagged,showHigh:e.showHigh,showLow:e.showLow}})],1)],1)},o=[],i=a("08e9"),r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"scroll col full-width toolbar-page fixed q-pr-xl column"},[a("div",{staticClass:"row justify-start text-left"},["tag"===e.grade?a("q-btn",{staticClass:"q-mt-xs",attrs:{icon:"fad fa-download",flat:"",size:"sm",color:"accent"},on:{click:e.downloadData}}):e._e()],1),a("div",{staticClass:"col column"},[a("div",{staticClass:"q-pr-sm col row q-mb-xl q-pb-xl"},[a("q-table",{staticClass:"my-sticky-header-table col column full-height",attrs:{dense:"",data:e.filteredOverview,columns:e.columns,"row-key":"id",stylex:"width:700px",flat:"","virtual-scroll":"",pagination:e.pagination,"rows-per-page-options":[0]},on:{"update:pagination":function(t){e.pagination=t}},scopedSlots:e._u([{key:"body",fn:function(t){return[a("q-tr",{staticClass:"wyap-table",attrs:{props:t}},[13===e.activeYear?a("q-td",{key:"flagged",staticClass:"q-pa-xs text-center",class:1===t.row.flagged?"bg-warning":"",attrs:{props:t,"auto-width":""},on:{click:function(a){return e.toggleFlag(t.row.id,t.row.flagged)}}},[a("q-icon",{attrs:{name:"fad fa-flag",color:1==t.row.flagged?"black":"font"}})],1):e._e(),13===e.activeYear?a("q-td",{key:"checked",staticClass:"q-pa-xs text-center",class:1===t.row.checked?"bg-positive":"",attrs:{props:t,"auto-width":""},on:{click:function(a){return e.toggleChecked(t.row.id,t.row.checked)}}},[a("q-icon",{attrs:{name:"fad fa-check",color:1==t.row.checked?"black":"font"}})],1):e._e(),a("q-td",{key:"name",attrs:{props:t,"auto-width":""}},[e._v(e._s(t.row.displayName))]),a("q-td",{key:"gender",attrs:{props:t,"auto-width":""}},[e._v(e._s(t.row.gender))]),a("q-td",{key:"house",attrs:{props:t,"auto-width":""}},[e._v(e._s(t.row.boardingHouseCode))]),a("q-td",{key:"baseline",attrs:{props:t,"auto-width":""}},[e._v(e._s(t.row.baseline))]),"tag"===e.grade?a("q-td",{key:"tagPoints",class:e.pointsClass(t.row),attrs:{props:t,"auto-width":""}},[e._v(e._s(t.row.tagPoints))]):e._e(),"tag"===e.grade?a("q-td",{key:"tags",attrs:{props:t,"auto-width":""}},e._l(t.row.exams,(function(t){return a("span",{key:t.id},[e._v("\n              ["+e._s(t.tag)+" - "+e._s(t.examCode)+"]\n              "),a("q-tooltip",{staticStyle:{"max-width":"300px",width:"300px",background:"white!important"},attrs:{"content-class":"bg-white text-black"}},[e._v("\n                "+e._s(t.examCode)+" - "+e._s(t.examName)+"\n              ")])],1)})),0):e._e(),"meg"===e.grade?a("q-td",{key:"megPoints",class:e.pointsClass(t.row),attrs:{props:t,"auto-width":""}},[e._v(e._s(t.row.megPoints))]):e._e(),"meg"===e.grade?a("q-td",{key:"megs",attrs:{props:t,"auto-width":""}},e._l(t.row.exams,(function(t){return a("span",{key:t.id},[e._v("\n              "+e._s(t.meg)+"\n              "),a("q-tooltip",{staticStyle:{"max-width":"300px",width:"300px",background:"white!important"},attrs:{"content-class":"bg-white text-black"}},[e._v("\n                "+e._s(t.examCode)+" - "+e._s(t.examName)+"\n              ")])],1)})),0):e._e(),13===e.activeYear?a("q-td",{key:"offerHigh",staticClass:"ellipsis",staticStyle:{"max-width":"200px"},attrs:{props:t}},[e._v("\n            "+e._s(t.row.ucasHigh.offer)+"\n            "),a("q-tooltip",{staticStyle:{"max-width":"300px",width:"300px",background:"white!important"},attrs:{"content-class":"bg-white text-black"}},[a("ul",{staticClass:"bg-white",staticStyle:{"max-width":"300px",width:"300px"}},[a("li",[e._v("Offer: "+e._s(t.row.ucasHigh.offer))]),a("li",[e._v("Uni: "+e._s(t.row.ucasHigh.uni))]),a("li",[e._v("Decision: "+e._s(t.row.ucasHigh.decision))]),a("li",[e._v("Status: "+e._s(t.row.ucasHigh.status))]),a("li",[e._v("Details: "+e._s(t.row.ucasHigh.details))])])])],1):e._e(),13===e.activeYear?a("q-td",{key:"offerLow",attrs:{props:t,"auto-width":""}},[e._v("\n            "+e._s(t.row.ucasLow.offer)+"\n            "),a("q-tooltip",{staticStyle:{"max-width":"300px",width:"300px",background:"white!important"},attrs:{"content-class":"bg-white text-black"}},[a("ul",{staticClass:"bg-white",staticStyle:{"max-width":"300px",width:"300px"}},[a("li",[e._v("Offer: "+e._s(t.row.ucasLow.offer))]),a("li",[e._v("Uni: "+e._s(t.row.ucasLow.uni))]),a("li",[e._v("Decision: "+e._s(t.row.ucasLow.decision))]),a("li",[e._v("Status: "+e._s(t.row.ucasLow.status))]),a("li",[e._v("Details: "+e._s(t.row.ucasLow.details))])])])],1):e._e(),a("q-td")],1)]}}])})],1)])])},l=[],n=(a("e125"),a("4823"),a("2e73"),a("76d0"),a("7f3a")),c=a.n(n),d=a("8e9e"),g=a.n(d),f=a("84a8"),h=a("47783"),w=a("9ce4");function u(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,s)}return a}function p(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?u(Object(a),!0).forEach((function(t){g()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):u(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var v,b,m={name:"Page.Dha.Tags.Overview",props:{grade:{required:!0},showMeta:{},filterFlagged:{},showHigh:{},showLow:{}},data(){return{exams:[],overview:[],pagination:{rowsPerPage:0},yearWatch:null,downloadLoading:!1}},computed:p(p({},Object(w["c"])("dha",["activeYear"])),{},{filteredOverview(){return this.filterFlagged?this.overview.filter((function(e){return 1===e.flagged})):this.overview},columns(){var e=[{name:"name",required:!0,label:"Name",align:"left",field:"displayName",sortable:!0},{name:"gender",required:!0,label:"M/F",align:"left",field:"gender",sortable:!0},{name:"house",align:"left",label:"Hs",field:"boardingHouseCode",sortable:!0},{name:"baseline",align:"left",label:"Baseline",field:"baseline",sortable:!0}],t=[{name:"flagged",align:"center",label:"Flag",field:"flagged",sortable:!0},{name:"checked",align:"center",label:"Check",field:"checked",sortable:!0}];return 13===this.activeYear&&(e=[].concat(t,c()(e))),"tag"===this.grade?(e.push({name:"tagPoints",align:"left",label:"Points",field:"tagPoints",sortable:!0}),e.push({name:"tags",align:"left",label:"TAGs",field:"tags"})):(e.push({name:"megPoints",align:"left",label:"Points",field:"megPoints",sortable:!0}),e.push({name:"megs",align:"left",label:"MAGs",field:"mags"})),13===this.activeYear&&(this.showHigh&&e.push({name:"offerHigh",align:"left",label:"Offer Firm",field:"ucasHighOffer"}),this.showLow&&e.push({name:"offerLow",align:"left",label:"Offer Insurance",field:"ucasLowOffer"})),e}}),methods:{pointsClass(e){return this.activeYear,""},getOverview(){this.$startLoading(),f["a"].getOverview(this.processOverview,this.$errorHandler,this.activeYear)},processOverview(e){this.overview=e,this.$endLoading()},toggleFlag(e,t){var a=1===t?0:1;this.overview.find((function(t){return t.id===e})).flagged=a,f["a"].toggleFlag(null,null,e,a)},toggleChecked(e,t){var a=1===t?0:1;this.overview.find((function(t){return t.id===e})).checked=a,f["a"].toggleChecked(null,null,e,a)},downloadData(){var e=this;if(this.overview.forEach((function(e){e.ucasHighOffer=e.ucasHigh.offer,e.ucasLowOffer=e.ucasLow.offer;var t="";e.exams.forEach((function(e){var a=e.tag?e.tag:"?";t=t+"["+a+" - "+e.examCode+"]"})),e.tags=t})),!0!==this.downloadLoading){this.downloadLoading=!0;var t={columns:this.columns,data:this.overview};h["a"].post("/tools/crud/sheet",t).then((function(t){e.$downloadBlob(t.data.url,t.data.file),e.downloadLoading=!1})).catch((function(t){e.downloadLoading=!1,e.errorHandler(t)}))}}},components:{},created(){var e=this;this.yearWatch=this.$store.watch((function(){return e.$store.getters["dha/activeYear"]}),this.getOverview),this.getOverview()},beforeDestroy(){this.yearWatch&&this.yearWatch()}},x=m,_=(a("1e83"),a("2be6")),y=a("2ef0"),k=a("18f0"),q=a("41c9"),O=a("b74b"),C=a("34ff"),L=a("3aaf"),H=a("dfd0"),P=a("e279"),j=a.n(P),F=Object(_["a"])(x,r,l,!1,null,null,null),S=F.exports;j()(F,"components",{QBtn:y["a"],QTable:k["a"],QTr:q["a"],QTd:O["a"],QIcon:C["a"],QTooltip:L["a"],QColor:H["a"]});var D={},Q=Object(_["a"])(D,v,b,!1,null,null,null),Y=Q.exports,T=a("6247"),$={name:"Page.DHA.Tags",data(){return{elements:[{name:"overview",label:"Overview",component:S},{name:"pupils",label:"pupils",component:Y}],grade:"tag",level:"tag",showMeta:!1,filterFlagged:!1,showHigh:!0,showLow:!0}},components:{toolbarPage:i["a"],YearBar:T["a"],Overview:S}},M=$,E=a("8c42"),A=a("6dd6"),B=a("f962c"),N=a("3d3c"),G=Object(_["a"])(M,s,o,!1,null,null,null);t["default"]=G.exports;j()(G,"components",{QPage:E["a"],QBtnToggle:A["a"],QSpace:B["a"],QToggle:N["a"]})}}]);