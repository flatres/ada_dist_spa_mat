(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[59],{"0733":function(a,t,e){"use strict";e.r(t);var s=function(){var a=this,t=a.$createElement,e=a._self._c||t;return e("q-page",{staticClass:"no-scroll full-height full-width toolbar-page fixed q-pr-xl q-pa-md column"},[e("div",{staticClass:"row"},a._l(a.totals,(function(t,s){return t.total>0?e("span",{key:s,staticClass:"q-mr-md"},[a._v(a._s(t.grade)+" = "+a._s(t.total))]):a._e()})),0),e("div",{staticClass:"row q-mr-xl"},[e("span",{staticClass:"q-mr-md"},[a._v("Points Avg = "+a._s(a.pointsAvg))]),e("q-space"),e("q-btn",{staticClass:"q-ml-md",attrs:{icon:"fad fa-download fa-xs",size:"sm",dense:"",color:"positive",flat:"",unelevated:"",loading:a.downloadLoading},on:{click:a.downloadData}})],1),e("div",{staticClass:"q-pr-sm col column q-pt-lg q-mb-xl q-pb-xl"},[e("q-table",{staticClass:"my-sticky-header-table col column full-height",attrs:{dense:"",data:a.ucas,columns:a.columns,"row-key":"id",stylex:"width:700px",flat:"","virtual-scroll":"",pagination:a.pagination,"rows-per-page-options":[0]},on:{"update:pagination":function(t){a.pagination=t}},scopedSlots:a._u([{key:"body",fn:function(t){return[e("q-tr",{staticClass:"wyap-table",attrs:{props:t}},[e("q-td",{key:"number",attrs:{props:t,"auto-width":""}},[a._v(a._s(t.row.schoolNumber))]),e("q-td",{key:"name",attrs:{props:t,"auto-width":""}},[a._v(a._s(t.row.displayName))]),e("q-td",{key:"gender",attrs:{props:t,"auto-width":""}},[a._v(a._s(t.row.gender))]),e("q-td",{key:"house",attrs:{props:t,"auto-width":""}},[a._v(a._s(t.row.boardingHouseCode))]),e("q-td",{key:"offer",attrs:{props:t,"auto-width":""}},[a._v("\n              "+a._s(t.row.ucas.offerShort)+"\n              "),e("q-tooltip",{staticStyle:{"max-width":"300px",width:"300px",background:"white!important"},attrs:{"content-class":"bg-white text-black"}},[e("ul",{staticClass:"bg-white",staticStyle:{"max-width":"300px",width:"300px"}},[e("li",[a._v("Offer: "+a._s(t.row.ucas.offer))]),e("li",[a._v("Uni: "+a._s(t.row.ucas.uni))]),e("li",[a._v("Course: "+a._s(t.row.ucas.course))]),e("li",[a._v("Decision: "+a._s(t.row.ucas.decision))]),e("li",[a._v("Status: "+a._s(t.row.ucas.status))]),e("li",[a._v("Details: "+a._s(t.row.ucas.details))])])])],1),e("q-td",{key:"offerPoints",attrs:{props:t,"auto-width":""}},[a._v(a._s(t.row.ucas.points))]),e("q-td")],1)]}}])})],1)])},l=[],o=e("7f3a"),i=e.n(o),n=(e("632c"),e("47783")),r={getPupilUcas(a,t){n["a"].get("/dha/ucas/pupils").then((function(t){a(t.data)})).catch((function(a){console.log(a)}))}},d={name:"PageDha.UCAS  ",data(){return{ucas:[],totals:[],pointsAvg:0,downloadLoading:!1}},methods:{getPupilUcas(){this.$startLoading(),r.getPupilUcas(this.processPupilUcas,this.$errorHandler)},processPupilUcas(a){this.$endLoading(),this.ucas=a.students.sort(this.$compare("lastName","asc")),this.totals=a.totals,this.pointsAvg=a.pointsAvg},downloadData(){var a=this;if(!0!==this.downloadLoading){this.downloadLoading=!0;var t=this.columns,e=[{label:"A*",field:"A*"},{label:"A",field:"A"},{label:"B",field:"B"},{label:"C",field:"C"},{label:"D",field:"D"},{label:"D1",field:"D1"},{label:"D2",field:"D2"},{label:"D3",field:"D3"},{label:"M1",field:"M1"},{label:"M2",field:"M2"},{label:"M3",field:"M3"}];t=[].concat(i()(t),e);var s={columns:t,data:this.ucas};n["a"].post("/tools/crud/sheet",s).then((function(t){a.$downloadBlob(t.data.url,t.data.file),a.downloadLoading=!1})).catch((function(t){a.downloadLoading=!1,a.errorHandler(t)}))}}},computed:{columns(){var a=[{name:"number",align:"left",label:"Sch #",field:"schoolNumber",sortable:!0},{name:"name",required:!0,label:"Name",align:"left",field:"displayName",sortable:!0},{name:"gender",required:!0,label:"M/F",align:"left",field:"gender",sortable:!0},{name:"house",align:"left",label:"Hs",field:"boardingHouseCode",sortable:!0}];return a.push({name:"offer",align:"left",label:"Offer",field:"offer"}),a.push({name:"offerPoints",align:"left",label:"Ofr Pnts",field:"points"}),a}},components:{},created(){this.getPupilUcas()},beforeDestroy(){}},c=d,u=e("2be6"),p=e("8c42"),f=e("f962c"),h=e("2ef0"),b=e("18f0"),g=e("41c9"),w=e("b74b"),m=e("3aaf"),_=e("e279"),v=e.n(_),q=Object(u["a"])(c,s,l,!1,null,null,null);t["default"]=q.exports;v()(q,"components",{QPage:p["a"],QSpace:f["a"],QBtn:h["a"],QTable:b["a"],QTr:g["a"],QTd:w["a"],QTooltip:m["a"]})}}]);