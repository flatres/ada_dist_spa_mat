(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[16],{"0c8b":function(e,t,s){},"1d6c":function(e,t,s){},"2eba":function(e,t,s){},"3bfd":function(e,t,s){"use strict";s.r(t);var i=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("toolbar-page",{attrs:{elements:e.elements,default:"sessions"}})},a=[],n=s("08e9"),o=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"q-ma-md"},[s("crud",{ref:"crud",attrs:{data:e.data,api:e.api,columns:e.columns,actions:e.actions,rowKey:"id",search:"",canNew:"",canDelete:"",canEdit:"",inlineEdit:"",indicator:"isActive",channel:"transport.sessions",selfPublish:"",reverse:"",newComponent:e.newComponent},on:{update:function(t){return e.$emit("update")},activate:e.activate,change:function(t){return e.$emit("update")},new:e.setRoutes,routes:e.setRoutes}}),s("q-dialog",{attrs:{persistent:"",maximized:"","transition-show":"slide-up","transition-hide":"slide-down"},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[s("q-card",{staticClass:"bg-dark text-white"},[s("q-bar",{staticClass:"bg-toolbar"},[e._v("\n        Copy Routes\n        "),s("q-space"),s("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{dense:"",flat:"",icon:"close"}},[s("q-tooltip",{attrs:{"content-class":"bg-white text-font"}},[e._v("Close")])],1)],1),s("q-card-section",[s("set-routes",{attrs:{activeSession:e.activeSession},on:{hide:function(t){e.dialog=!1}}})],1)],1)],1)],1)},l=[],c=s("d612"),r=s("9d37"),d=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("span",{staticClass:"text-positive text-bold"},[e._v(e._s(e.currentSession.description))]),e.currentSessionRoutes.length>0?s("div",[s("span",{staticClass:"full-width text-h4 text-center"},[e._v("This session already has routes. Delete all routes to re-enable the copying feature.")]),s("critical-button",{staticClass:"q-mt-md full-width",attrs:{label:"Close",success:function(){e.$emit("hide")}}})],1):e._e(),0===e.currentSessionRoutes.length?s("div",[s("div",{staticClass:"row"},[s("q-select",{staticClass:"q-mb-lg text-lime13",staticStyle:{width:"300px"},attrs:{label:"Copy Coaches From",options:e.options,dark:"","content-class":"text-lime13"},model:{value:e.selectedSession,callback:function(t){e.selectedSession=t},expression:"selectedSession"}}),s("div",{staticClass:"q-py-md q-ml-md col"},[s("critical-button",{staticClass:"full-width",attrs:{label:"SAVE",success:e.copyRoutes}})],1)],1),s("div",{staticClass:"row"},[s("routes",{staticClass:"col",attrs:{locked:"",session:e.selectedSessionId}})],1)]):e._e()])},u=[],p=s("423b"),m=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("q-btn",{staticClass:"col q-ma-sm",attrs:{size:e.size,outline:"",color:"positive",dense:"",icon:e.icon,label:e.label},on:{click:function(t){return e.success()}}})},f=[],h={name:"Component.Buttons.critical",props:{success:{type:Function,required:!0},size:{type:String,default:"md"},icon:{type:String,default:""},label:{type:String,default:"Delete"}},data(){return{}},methods:{},computed:{},components:{},created(){}},b=h,v=(s("4c26"),s("2be6")),g=s("2ef0"),S=s("e279"),C=s.n(S),w=Object(v["a"])(b,m,f,!1,null,"55eb597c",null),D=w.exports;C()(w,"components",{QBtn:g["a"]});var y=s("5228"),x={name:"Tbs.Coaches.Routes",props:{activeSession:{required:!0,type:Number}},data(){return{sessions:[],deployedSession:null,selectedSession:null,selectedSessionId:null,currentSessionRoutes:[],currentSession:[]}},methods:{setOptions(e){this.sessions=e,this.sessions.unshift({id:0,description:"DEFAULT ROUTES"})},getGlobalOptions(){r["a"].getSessions(this.setOptions)},copyRoutes(){this.$q.loading.show(),y["a"].postCopyRoutes(this.copied,null,this.selectedSession.id,this.activeSession)},copied(){this.$q.loading.hide(),this.$emit("hide")}},watch:{selectedSession(){this.selectedSessionId=this.selectedSession.value}},computed:{options(){return this.sessions.map((function(e){return{value:e.id,label:e.description,sublabel:1===e.isActive?"ACTIVE":""}}))}},components:{Routes:p["a"],CriticalButton:D},created(){var e=this;this.getGlobalOptions(),this.selectedSession={value:0,label:"DEFAULT ROUTES"},this.selectedSession.id=0,y["a"].getRoutes((function(t){e.currentSessionRoutes=t}),null,this.activeSession),r["a"].getSession((function(t){e.currentSession=t,console.log(e.currentSession)}),null,this.activeSession)}},q=x,R=(s("b1d6"),s("3946")),$=Object(v["a"])(q,d,u,!1,null,"9b9eb802",null),_=$.exports;C()($,"components",{QSelect:R["a"]});var O=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"input-form"},[s("insert",e._b({ref:"insert",on:{input:e.input,saved:function(t){return e.$emit("saved",e.datum)}}},"insert",e.$props,!1))],1)},E=[],T=(s("4fb0"),s("5a18")),k=s("c286"),A={name:"ComponentCrudNew",props:{rowKey:{default:"id"},columns:{required:!0,type:Array},data:{required:!0,type:Array},api:{required:!0,type:Object}},data(){return{}},methods:{input(e,t){switch(t.field){case"dateOut":var s=e.split("-"),i=new Date(s[2],s[1]-1,s[0]),a=k["b"].addToDate(i,{days:2});this.$refs.insert.setValue("dateRtn",k["b"].formatDate(a,"DD-MM-YYYY")),r["a"].getDeadlines(this.setDeadlines,this.$errorHandler,k["b"].formatDate(i,"YYYY-MM-DD"));break;default:}},setDeadlines(e){var t=e.taxiDeadline,s=e.coachDeadline;this.$refs.insert.setValue("taxiDeadline",t),this.$refs.insert.setValue("coachDeadline",s)}},computed:{},components:{Insert:T["default"]},created(){},mounted(){}},Q=A,j=(s("bc0c"),Object(v["a"])(Q,O,E,!1,null,"1e3f12a6",null)),Y=j.exports,B=s("89a2"),I={name:"ComponentCompanies",data(){return{dialog:!1,newComponent:Y,activeSession:null,api:{get:r["a"].getSessions,getSinglex:r["a"].getSession,put:r["a"].putSession,post:r["a"].postSession,delete:r["a"].deleteSession},columns:[{name:"id",label:"id",field:"id",type:"string",align:"left",hidden:!0},{name:"description",label:"Description",field:"description",type:"string",align:"left",validations:{required:B["required"],minLength:Object(B["minLength"])(4)},editable:!0},{name:"dteOutward",label:"Outward Date",field:"dateOut",type:"date",align:"right",validations:{},editable:!0},{name:"dteRet",label:"Ret Date",field:"dateRtn",type:"date",align:"right",validations:{},editable:!0},{name:"taxiDeadlineDateTime",label:"Taxi Deadline",field:"taxiDeadline",type:"datetime",align:"right",validations:{},editable:!0},{name:"coachDeadline",label:"Coach Deadline",field:"coachDeadline",type:"datetime",align:"right",validations:{},editable:!0}],actions:[{title:"Import Routes",event:"routes",icon:"fal fa-bus"}],showForm:!0,maxWidth:800}},methods:{setRoutes(e){this.activeSession=e.id?e.id:e,this.dialog=!0},activate(e){var t=this;r["a"].activateSession((function(){t.update()}),(function(){console.warn("Unable to Activate")}),e["id"])},update(){this.$refs.crud.get(),this.$emit("update")}},computed:{},components:{Crud:c["a"],SetRoutes:_},created(){}},F=I,U=(s("5710"),s("e81c")),V=s("ebe6"),z=s("5d16"),L=s("f962c"),M=s("3aaf"),N=s("965d"),P=s("58c0"),G=Object(v["a"])(F,o,l,!1,null,"04a49c75",null),J=G.exports;C()(G,"components",{QDialog:U["a"],QCard:V["a"],QBar:z["a"],QSpace:L["a"],QBtn:g["a"],QTooltip:M["a"],QCardSection:N["a"]}),C()(G,"directives",{ClosePopup:P["a"]});var K=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("routes",{attrs:{session:0}})},H=[],W={name:"Tbs.Settings.DefaultRoutes",data(){return{}},methods:{},watch:{},computed:{},components:{Routes:p["a"]},created(){}},X=W,Z=(s("a59f"),Object(v["a"])(X,K,H,!1,null,"7e4124e6",null)),ee=Z.exports,te={name:"Page.TBS.Settings",data(){return{elements:[{name:"sessions",label:"sessions",component:J,shortcut:"b"},{name:"routes",label:"default routes",shortcut:"a",component:ee}]}},components:{toolbarPage:n["a"]}},se=te,ie=Object(v["a"])(se,i,a,!1,null,null,null);t["default"]=ie.exports},"4c26":function(e,t,s){"use strict";var i=s("59f4"),a=s.n(i);a.a},5710:function(e,t,s){"use strict";var i=s("fcdc"),a=s.n(i);a.a},"59f4":function(e,t,s){},a59f:function(e,t,s){"use strict";var i=s("1d6c"),a=s.n(i);a.a},b1d6:function(e,t,s){"use strict";var i=s("2eba"),a=s.n(i);a.a},bc0c:function(e,t,s){"use strict";var i=s("0c8b"),a=s.n(i);a.a},fcdc:function(e,t,s){}}]);