(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[44],{"61dc":function(t,a,s){"use strict";s.r(a);var e=function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("q-page",{staticClass:"scroll full-height full-width toolbar-page fixed q-pr-xl q-pa-md column"},[t.showConsole?t._e():s("div",{staticClass:"col column"},[s("div",{staticClass:"row q-pr-xl"},[s("year-bar",{staticClass:"ybx-border",attrs:{"exams-only":""}}),s("q-space"),s("q-btn",{staticClass:"a-btn on-left",attrs:{flat:"",label:"TAG Statistics",icon:"fad fa-file-chart-line"},on:{click:t.getTagStatistics}}),s("q-btn",{staticClass:"a-btn",attrs:{flat:"",label:"MAG Statistics",icon:"fad fa-file-chart-line"},on:{click:t.getMegStatistics}}),s("q-btn",{staticClass:"a-btn on-right",attrs:{flat:"",label:"Upload TAG Sheet",icon:"fad fa-upload"},on:{click:function(a){t.uploadOpen=!0}}})],1),s("div",{staticClass:"q-pr-sm col column q-pt-lg q-mb-xl q-pb-xl"},[s("q-table",{staticClass:"my-sticky-header-table col column scroll",attrs:{dense:"",data:t.exams,columns:t.columns,"row-key":"id",stylex:"width:700px",flat:"",pagination:{rowsPerPage:1e3}},scopedSlots:t._u([{key:"body",fn:function(a){return[s("q-tr",{staticClass:"wyap-table",attrs:{props:a}},[s("q-td",{key:"examName",attrs:{props:a,"auto-width":""}},[t._v("\n            "+t._s(a.row.examName)+"\n          ")]),s("q-td",{key:"examCode",attrs:{props:a,"auto-width":""}},[t._v("\n            "+t._s(a.row.examCode)+"\n          ")]),s("q-td",{key:"tags",attrs:{props:a,"auto-width":""}},[s("div",{staticClass:"fit rounded",class:a.row.tagCount>0?"bg-green text-font-negative":"text-font bd-warning"},[s("span",{staticStyle:{"font-size":"10px"}},[t._v(t._s(a.row.tagCount))])])]),s("q-td",{key:"megs",attrs:{props:a,"auto-width":""}},[s("div",{staticClass:"fit rounded ",class:a.row.megCount>0?"bg-green text-font-negative":"text-font bd-warning"},[s("span",{staticClass:" ",staticStyle:{"font-size":"10px"}},[t._v(t._s(a.row.megCount))])])]),s("q-td",{key:"sa1",attrs:{props:a,"auto-width":""}},[t.summerAssessments(a.row).length>0?s("div",{staticClass:"fit bg-accent rounded",class:t.saResultsCount(a.row,1)>0?"bg-accent":"bg-warning"},[s("span",{staticClass:"text-font-negative ",staticStyle:{"font-size":"10px"}},[t._v(t._s(t.saResultsCount(a.row,1)))])]):t._e()]),s("q-td",{key:"sa2",attrs:{props:a,"auto-width":""}},[t.summerAssessments(a.row).length>1?s("div",{staticClass:"fit bg-accent",class:t.saResultsCount(a.row,2)>0?"bg-accent":"bg-warning"},[s("span",{staticClass:"text-font-negative",staticStyle:{"font-size":"10px"}},[t._v(t._s(t.saResultsCount(a.row,2)))])]):t._e()]),s("q-td",{key:"sa3",attrs:{props:a,"auto-width":""}},[t.summerAssessments(a.row).length>2?s("div",{staticClass:"fit bg-accent",class:t.saResultsCount(a.row,3)>0?"bg-accent":"bg-warning"},[s("span",{staticClass:"text-font-negative",staticStyle:{"font-size":"10px"}},[t._v(t._s(t.saResultsCount(a.row,3)))])]):t._e()]),s("q-td",{key:"nea",attrs:{props:a,"auto-width":""}},[t.hasNEA(a.row)?s("div",{staticClass:"fit bg-accent",class:t.neaResultsCount(a.row)>0?"bg-accent":"bg-warning"},[s("span",{staticClass:"text-font-negative",staticStyle:{"font-size":"10px"}},[t._v(t._s(t.neaResultsCount(a.row,1)))])]):t._e()]),s("q-td",{key:"w1",attrs:{props:a,"auto-width":""}},[t.wyaps(a.row).length>0?s("div",{staticClass:"fit flex items-center justify-center",class:t.wyapResultsCount(a.row,1)>0?"bg-accent":"bg-warning"},[s("span",{staticClass:"text-font-negative",staticStyle:{"font-size":"10px"}},[t._v(t._s(t.wyapResultsCount(a.row,1)))])]):t._e()]),s("q-td",{key:"w2",attrs:{props:a,"auto-width":""}},[t.wyaps(a.row).length>1?s("div",{staticClass:"fit flex items-center justify-center",class:t.wyapResultsCount(a.row,2)>0?"bg-accent":"bg-warning"},[s("span",{staticClass:"text-font-negative",staticStyle:{"font-size":"10px"}},[t._v(t._s(t.wyapResultsCount(a.row,2)))])]):t._e()]),s("q-td",{key:"w3",attrs:{props:a,"auto-width":""}},[t.wyaps(a.row).length>2?s("div",{staticClass:"fit flex items-center justify-center",class:t.wyapResultsCount(a.row,3)>0?"bg-accent":"bg-warning"},[s("span",{staticClass:"text-font-negative",staticStyle:{"font-size":"10px"}},[t._v(t._s(t.wyapResultsCount(a.row,3)))])]):t._e()]),s("q-td",{key:"w4",attrs:{props:a,"auto-width":""}},[t.wyaps(a.row).length>3?s("div",{staticClass:"fit flex items-center justify-center",class:t.wyapResultsCount(a.row,4)>0?"bg-accent":"bg-warning"},[s("span",{staticClass:"text-font-negative",staticStyle:{"font-size":"10px"}},[t._v(t._s(t.wyapResultsCount(a.row,4)))])]):t._e()]),s("q-td",{key:"w5",attrs:{props:a,"auto-width":""}},[t.wyaps(a.row).length>4?s("div",{staticClass:"fit flex items-center justify-center",class:t.wyapResultsCount(a.row,5)>0?"bg-accent":"bg-warning"},[s("span",{staticClass:"text-font-negative",staticStyle:{"font-size":"10px"}},[t._v(t._s(t.wyapResultsCount(a.row,5)))])]):t._e()]),s("q-td")],1)]}}],null,!1,3979296435)})],1),s("q-dialog",{attrs:{positionX:"top",persistent:""},model:{value:t.uploadOpen,callback:function(a){t.uploadOpen=a},expression:"uploadOpen"}},[s("q-card",{staticClass:"bg-primary bd-font-secondary",staticStyle:{"min-width":"35%"}},[s("q-bar",{staticClass:"bg-secondary"},[s("span",[t._v("File Upload")]),s("q-space"),s("q-btn",{attrs:{dense:"",icon:"fas fa-times",size:"xs",flat:"",color:"font"},on:{click:t.cancel}})],1),s("q-card-section",[s("q-file",{staticClass:"full-width text-font",attrs:{label:"Select File",outlined:"",dense:"",color:"font",accept:".xlsx"},model:{value:t.uploadFile,callback:function(a){t.uploadFile=a},expression:"uploadFile"}}),s("br"),s("q-btn",{staticClass:"full-width a-btn q-mb-sm",attrs:{disabled:!t.uploadFile,loading:t.uploadingInitial,label:"upload",icon:"fad fa-upload"},on:{click:t.uploadInitial}}),s("br"),t.initialUploaded&&t.initialError?s("div",[s("q-scroll-area",{staticClass:"full-width bd-font-secondary",staticStyle:{height:"100px"}},[s("span",{staticClass:"full-width text-left q-my-md text-bold text-warning"},[t._v("Error!!!")]),s("p",{staticClass:"text-warning",domProps:{innerHTML:t._s(t.initialErrorMsg)}})])],1):t._e(),t.initialUploaded&&!t.initialError?s("div",[s("span",{staticClass:"full-width text-left q-my-md text-bold"},[t._v("Verify Details")]),s("p",{staticClass:"q-mb-none q-ml-xs text-font"},[t._v("Exam: "+t._s(t.initialData.exam.examName))]),s("p",{staticClass:"q-mb-none q-ml-xs text-font"},[t._v("Level: "+t._s(t.initialData.exam.year>11?"A Level / Pre U":"GCSE"))]),s("p",{staticClass:"q-mb-none q-ml-xs text-font"},[t._v(t._s(t.initialData.students.length)+" students")])]):t._e(),s("br"),s("div",{staticClass:"row"},[s("q-btn",{staticClass:"col a-btn",attrs:{label:"Cancel"},on:{click:t.cancel}}),s("q-btn",{staticClass:"col a-btn on-right",attrs:{loading:t.uploadingFinal,disabled:!t.uploadInfo&&!t.initialError,label:"Submit",icon:"fad fa-praying-hands"},on:{click:t.uploadFinal}})],1)],1)],1)],1)],1),t.showConsole?s("div",[s("div",{staticClass:"row"},[s("div",{staticClass:"col"},[s("q-btn",{staticClass:"q-mt-md float-right no-shadow",attrs:{"text-color":"font",size:"sm",icon:"fal fa-terminal"},on:{click:function(a){t.showConsole=!t.showConsole}}})],1)]),s("console-component",{staticStyle:{"min-height":"400px"}})],1):t._e()])},i=[],n=(s("e125"),s("4823"),s("2e73"),s("76d0"),s("632c"),s("8e9e")),l=s.n(n),o=s("6247"),r=s("84a8"),c=s("dd14"),p=s("9ce4");function d(t,a){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var e=Object.getOwnPropertySymbols(t);a&&(e=e.filter((function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable}))),s.push.apply(s,e)}return s}function u(t){for(var a=1;a<arguments.length;a++){var s=null!=arguments[a]?arguments[a]:{};a%2?d(Object(s),!0).forEach((function(a){l()(t,a,s[a])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):d(Object(s)).forEach((function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(s,a))}))}return t}var f={name:"PageDha",data(){return{exams:[],columns:[{name:"examName",required:!0,label:"Exam Name",align:"left",field:"examName",sortable:!0},{name:"examCode",align:"left",label:"Code"},{name:"tags",align:"center",label:"TAGS"},{name:"megs",align:"center",label:"MAGS"},{name:"sa1",align:"center",label:"SA1"},{name:"sa2",align:"center",label:"SA2"},{name:"sa3",align:"center",label:"SA3"},{name:"nea",align:"center",label:"NEA"},{name:"w1",align:"center",label:"WY1"},{name:"w2",align:"center",label:"WY2"},{name:"w3",align:"center",label:"WY3"},{name:"w4",align:"center",label:"WY4"},{name:"w5",align:"center",label:"WY5"}],uploadOpen:!1,uploadFile:null,uploadInfo:null,uploadingInitial:!1,initialUploaded:!1,initialError:!1,initialErrorMsg:"",initialData:{},finalError:!1,uploadingFinal:!1,finalUploaded:!1,showConsole:!1,statistics:[]}},computed:u({},Object(p["c"])("dha",["activeYear"])),methods:u(u(u({},Object(p["b"])("sockets",["clearConsoleLog"])),Object(p["d"])("dha",["setActiveYear"])),{},{getWyaps(){this.$startLoading(),r["a"].getWyaps(this.processWyaps,this.$errorHandler,this.activeYear)},processWyaps(t){this.$endLoading(),this.exams=t.sort(this.$compare("examName","asc"))},summerAssessments(t){return t.wyaps.filter((function(t){return"SA"===t.typeShort}))},hasNEA(t){return t.wyaps.filter((function(t){return"NEA"===t.typeShort})).length>0},wyaps(t){return t.wyaps.filter((function(t){return"WYAP"===t.typeShort}))},wyapResultsCount(t,a){var s=t.wyaps.filter((function(t){return"WYAP"===t.typeShort}));if(s[a-1]){var e=s[a-1];return e.resultsCount}},saResultsCount(t,a){var s=t.wyaps.filter((function(t){return"SA"===t.typeShort}));if(s[a-1]){var e=s[a-1];return e.resultsCount}},neaResultsCount(t){var a=1,s=t.wyaps.filter((function(t){return"NEA"===t.typeShort}));if(s[a-1]){var e=s[a-1];return e.resultsCount}},cancel(){this.uploadFile=null,this.initialData={},this.uploadOpen=!1,this.uploadInfo=null,this.initialError=!1,this.uploadingInitial=!1,this.initialUploaded=!1,this.uploadingFinal=!1,this.finalUploaded=!1,this.finalError=!1},uploadInitial(){this.uploadFile&&(this.uploadingInitial=!0,r["a"].postInitialUpload(this.processInitial,this.initialUploadError,this.uploadFile))},processInitial(t){this.initialError=t.error,this.uploadInfo=t.info,this.uploadingInitial=!1,this.initialUploaded=!0,t.error&&(this.initalError=!0,this.initialErrorMsg=t.msg),this.initialData=t},initialUploadError(t){console.error(t),this.uploadingInitial=!1,this.initalError=!1},uploadFinal(){this.uploadFile&&(this.uploadingFinal=!0,r["a"].postFinalUpload(this.processFinal,this.finalUploadError,this.uploadFile,this.initialData.exam))},finalUploadError(t){console.error(t),this.uploadingFinal=!1,this.finalError=!0},processFinal(){this.uploadingFinal=!1,this.cancel()},getMegStatistics(){this.clearConsoleLog(),this.showConsole=!0,r["a"].getMegStatistics(this.processStatistics,this.$errorHandler,this.activeYear)},getTagStatistics(){this.clearConsoleLog(),this.showConsole=!0,r["a"].getTagStatistics(this.processStatistics,this.$errorHandler,this.activeYear)},simulateStatistics(){r["a"].simulateStatistics(this.processSimulate,this.$errorHandler,this.activeYear)},processSimulate(){},processStatistics(t){this.showConsole=!1,this.statistics=t.statistics,this.$downloadBlob(this.statistics.spreadsheet.path,this.statistics.spreadsheet.filename)}}),components:{YearBar:o["a"],ConsoleComponent:c["a"]},created(){var t=this;this.setActiveYear(13),this.yearWatch=this.$store.watch((function(){return t.$store.getters["dha/activeYear"]}),this.getWyaps),this.getWyaps()},beforeDestroy(){this.yearWatch&&this.yearWatch()}},h=f,g=(s("a5a2"),s("2be6")),w=s("8c42"),b=s("f962c"),m=s("2ef0"),y=s("18f0"),C=s("41c9"),v=s("b74b"),x=s("e81c"),S=s("ebe6"),_=s("5d16"),q=s("965d"),k=s("2050"),E=s("26a8"),O=s("dfd0"),A=s("e279"),F=s.n(A),R=Object(g["a"])(h,e,i,!1,null,null,null);a["default"]=R.exports;F()(R,"components",{QPage:w["a"],QSpace:b["a"],QBtn:m["a"],QTable:y["a"],QTr:C["a"],QTd:v["a"],QDialog:x["a"],QCard:S["a"],QBar:_["a"],QCardSection:q["a"],QFile:k["a"],QScrollArea:E["a"],QColor:O["a"]})},a5a2:function(t,a,s){"use strict";var e=s("bbda"),i=s.n(e);i.a},bbda:function(t,a,s){}}]);