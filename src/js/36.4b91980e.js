(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[36],{"2e55":function(t,e,a){},c342:function(t,e,a){"use strict";var s=a("2e55"),i=a.n(s);i.a},edef:function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("q-layout",{attrs:{view:"hHh lpR fFf"}},[a("q-header",{staticClass:"bg-primary text-white",staticStyle:{"border-bottom":"1px solid black"},attrs:{elevatedx:""}},[a("q-toolbar",{staticClass:"bg-grey-4"},[a("q-toolbar-title",{staticClass:"justify-center"},[a("h2",{staticClass:"q-mt-none q-mb-xs text-center text-black",staticStyle:{"font-size":"30px",height:"38px"}},[t._v("Coach "),a("span",{staticClass:"text-bold text-black"},[t._v(t._s(t.code))])]),a("p",{staticClass:"text-center text-black q-mb-xs"},[t._v(t._s(t.register.length)+" students : "+t._s(t.spacesLeft)+" spaces remaining")])])],1)],1),a("q-page-container",{staticClass:"q-pb-xl"},[t.qrOpen||t.addOpen?t._e():a("q-page-sticky",{staticClass:"z-max",attrs:{position:"bottom-left",offset:[18,18]}},[a("q-fab",{attrs:{"vertical-actions-align":"left",color:"warning",icon:"fal fa-plus",direction:"up",position:"bottom-left"},model:{value:t.fab,callback:function(e){t.fab=e},expression:"fab"}},[t.addOpen?t._e():a("q-fab-action",{attrs:{"label-position":"right",color:"primary",icon:"fal fa-user",label:"Add Pupil"},on:{click:function(e){t.addOpen=!0}}}),a("q-fab-action",{attrs:{"label-position":"right",color:"primary",icon:"fal fa-camera",label:"Scan Codes"},on:{click:function(e){t.qrOpen=!0}}})],1)],1),!0===t.qrOpen?a("q-page-sticky",{staticClass:"z-max",attrs:{position:"bottom-left",offset:[18,18]}},[a("q-btn",{attrs:{color:"warning",round:"",icon:"fal fa-arrow-left"},on:{click:function(e){t.qrOpen=!1}}})],1):t._e(),a("q-dialog",{attrs:{maximized:""},model:{value:t.qrOpen,callback:function(e){t.qrOpen=e},expression:"qrOpen"}},[a("qrcode-stream",{attrs:{track:t.paintBoundingBox},on:{init:t.onInit}})],1),a("div",{staticClass:"flex-center full-width"},[a("q-list",{staticClass:"flex-center",staticStyle:{"max-width":"400px",margin:"auto"}},t._l(t.register,(function(e){return 0===e.isRegistered?a("q-item",{directives:[{name:"ripple",rawName:"v-ripple"}],key:e.id,attrs:{tag:"label"}},[a("q-item-section",[a("q-item-label",{staticClass:"text-left"},[t._v(t._s(e.details.displayName))]),a("q-item-label",{staticClass:"text-left",attrs:{caption:""}},[t._v(t._s(e.details.boardingHouse)+" - "+t._s(e.stop))])],1),a("q-item-section",{attrs:{side:"",top:""}},[a("q-btn-toggle",{staticClass:"toggle",attrs:{spread:"","no-caps":"",unelevated:"","toggle-color":"dark",color:"white","text-color":"dark",options:[{label:"No",value:0},{label:"Yes",value:1}]},on:{input:function(a){return t.registerStudent(e)}},model:{value:e.isRegistered,callback:function(a){t.$set(e,"isRegistered",a)},expression:"student.isRegistered"}})],1)],1):t._e()})),1)],1),a("h2",{staticClass:"text-center",staticStyle:{"font-size":"28px"}},[t._v("Registered")]),a("div",{staticClass:"flex-center full-width"},[a("q-list",{staticClass:"flex-center",staticStyle:{"max-width":"400px",margin:"auto"}},t._l(t.register,(function(e){return 1===e.isRegistered?a("q-item",{directives:[{name:"ripple",rawName:"v-ripple"}],key:e.id,attrs:{tag:"label"}},[a("q-item-section",[a("q-item-label",{staticClass:"text-left"},[t._v(t._s(e.details.fullName))]),a("q-item-label",{staticClass:"text-left",attrs:{caption:""}},[t._v(t._s(e.details.boardingHouse)+" - "+t._s(e.stop))])],1),a("q-item-section",{attrs:{side:"",top:""}},[a("q-btn-toggle",{staticClass:"toggle",attrs:{spread:"","no-caps":"",unelevated:"","toggle-color":"dark",color:"white","text-color":"dark",options:[{label:"No",value:0},{label:"Yes",value:1}]},on:{input:function(a){return t.registerStudent(e)}},model:{value:e.isRegistered,callback:function(a){t.$set(e,"isRegistered",a)},expression:"student.isRegistered"}})],1)],1):t._e()})),1)],1)],1),a("q-dialog",{attrs:{maximized:""},model:{value:t.addOpen,callback:function(e){t.addOpen=e},expression:"addOpen"}},[a("q-layout",{staticClass:"bg-white",attrs:{view:"hHh lpR fFf"}},[a("q-header",{staticClass:"bg-primary text-white",attrs:{elevated:""}},[a("q-toolbar",{staticClass:"items-center row"},[a("q-toolbar-title",[a("q-icon",{attrs:{name:"fad fa-user"}}),a("span",{staticClass:"on-right"},[t._v("Add Pupil")])],1),a("q-space"),a("q-btn",{attrs:{label:"cancel",outline:"",color:"white"},on:{click:t.cancelAdd}})],1)],1),a("q-page-container",{staticClass:"bg-white"},[a("div",{staticClass:"fitx flex row items-start justify-around content-stretch q-mt-md"},t._l(t.houses,(function(e){return a("q-btn",{key:e.code,staticClass:"bg-grey-4 q-mb-xs text-bold text-center items-center",staticStyle:{width:"45vw",height:"15vw"},attrs:{flat:"",color:"",outline:"","content-class":"text-red"}},[a("span",{staticClass:"full-width text-bold items-center"},[t._v(t._s(e.code))])])})),1)])],1)],1)],1)},i=[],n=(a("2e73"),a("5e32"),a("4823"),a("9ebb"),a("c880"),a("a7e1"),a("76d0"),a("93db")),o=a.n(n),r=(a("df26"),a("5965")),l=a.n(r),c=a("47783"),u={getCoachRegister(t,e,a){c["a"].get("/aux/bookings/coach/register/"+a).then((function(e){t(e.data)})).catch((function(t){console.log(t)}))},putCoachRegister(t,e,a){c["a"].put("/aux/bookings/coach/register",a).then((function(e){t(e.data)})).catch((function(t){console.log(t),e()}))},getHouses(t,e,a){c["a"].get("/aux/bookings/coach/houses/"+a).then((function(e){t(e.data)})).catch((function(t){console.log(t)}))},getStudents(t,e){c["a"].get("/aux/bookings/coach/students").then((function(e){t(e.data)})).catch((function(t){console.log(t)}))}},d=a("9973");function f(t,e){var a;if("undefined"===typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(a=p(t))||e&&t&&"number"===typeof t.length){a&&(t=a);var s=0,i=function(){};return{s:i,n:function(){return s>=t.length?{done:!0}:{done:!1,value:t[s++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var n,o=!0,r=!1;return{s:function(){a=t[Symbol.iterator]()},n:function(){var t=a.next();return o=t.done,t},e:function(t){r=!0,n=t},f:function(){try{o||null==a.return||a.return()}finally{if(r)throw n}}}}function p(t,e){if(t){if("string"===typeof t)return g(t,e);var a=Object.prototype.toString.call(t).slice(8,-1);return"Object"===a&&t.constructor&&(a=t.constructor.name),"Map"===a||"Set"===a?Array.from(t):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?g(t,e):void 0}}function g(t,e){(null==e||e>t.length)&&(e=t.length);for(var a=0,s=new Array(e);a<e;a++)s[a]=t[a];return s}var h={name:"Aux.Bookings.Coach",props:{},data(){return{uniqueId:null,code:null,capacity:null,register:[],spacesLeft:"",addOpen:!1,houses:[],newHouse:null,qrOpen:!1,fab:!1,loading:!1}},methods:{process(t){var e=this;this.code=t.code,this.capacity=t.capacity,this.register=t.register,this.spacesLeft=t.spacesLeft,u.getHouses((function(t){e.houses=t,console.log(t)}),this.$errorHandler,this.uniqueId)},getRegister(){u.getCoachRegister(this.process,this.$errorHandler,this.uniqueId)},registerStudent(t){t.coachUniqueId=this.uniqueId,u.putCoachRegister(null,this.$errorHandler,t)},cancelAdd(){this.newHouse=null,this.addOpen=!1},paintBoundingBox(t,e){var a,s=f(t);try{for(s.s();!(a=s.n()).done;){var i=a.value,n=i.boundingBox,o=n.x,r=n.y,l=n.width,c=n.height;e.lineWidth=2,e.strokeStyle="#007bff",e.strokeRect(o,r,l,c)}}catch(u){s.e(u)}finally{s.f()}},onInit(t){var e=this;return l()(o.a.mark((function a(){return o.a.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return e.loading=!0,e.$q.loading.show(),a.prev=2,a.next=5,t;case 5:a.next=10;break;case 7:a.prev=7,a.t0=a["catch"](2),console.error(a.t0);case 10:return a.prev=10,e.loading=!1,e.$q.loading.hide(),a.finish(10);case 14:case"end":return a.stop()}}),a,null,[[2,7,10,14]])})))()}},computed:{},watch:{},components:{QrcodeStream:d["QrcodeStream"]},created(){this.uniqueId=this.$route.params.id,this.uniqueId&&(this.getRegister(),this.$wampSubscribe("aux.coaches.register."+this.uniqueId,this.getRegister))}},b=h,m=(a("c342"),a("2be6")),x=a("b4af"),q=a("5c88"),v=a("eb05"),y=a("f85a"),w=a("2ce9"),C=a("4f38"),k=a("6799"),_=a("cd4d"),S=a("2ef0"),R=a("e81c"),O=a("6c93"),Q=a("ac9b"),I=a("66dc"),A=a("7d9a"),H=a("6dd6"),$=a("34ff"),B=a("f962c"),L=a("2be8"),j=a("e279"),z=a.n(j),N=Object(m["a"])(b,s,i,!1,null,"d20f7612",null);e["default"]=N.exports;z()(N,"components",{QLayout:x["a"],QHeader:q["a"],QToolbar:v["a"],QToolbarTitle:y["a"],QPageContainer:w["a"],QPageSticky:C["a"],QFab:k["a"],QFabAction:_["a"],QBtn:S["a"],QDialog:R["a"],QList:O["a"],QItem:Q["a"],QItemSection:I["a"],QItemLabel:A["a"],QBtnToggle:H["a"],QIcon:$["a"],QSpace:B["a"]}),z()(N,"directives",{Ripple:L["a"]})}}]);