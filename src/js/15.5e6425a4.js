(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[15],{"0dde":function(t,e,s){},"114f":function(t,e,s){"use strict";var a=s("fbb2"),r=s.n(a);r.a},89754:function(t,e,s){"use strict";var a=s("a1f6"),r=s.n(a);r.a},a1f6:function(t,e,s){},ada9:function(t,e,s){"use strict";var a=s("c7eb"),r=s.n(a);r.a},c7eb:function(t,e,s){},e4b7:function(t,e,s){},e985:function(t,e,s){"use strict";var a=s("0dde"),r=s.n(a);r.a},f0d1:function(t,e,s){"use strict";s.r(e);var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return t.getGlobalSubject?s("div",[s("div",{staticClass:"full-width bg-secondary",staticStyle:{height:"1px"}}),s("toolbar-page",{staticClass:"t-bar",attrs:{elements:t.elements,default:"wyap"},scopedSlots:t._u([{key:"before",fn:function(){return[s("year-bar",{staticClass:"yb-border",attrs:{exams:""}})]},proxy:!0}],null,!1,311916022)})],1):t._e()},r=[],i=(s("e125"),s("4823"),s("2e73"),s("76d0"),s("7f3a")),n=s.n(i),l=s("8e9e"),o=s.n(l),c=s("9ce4"),d=s("aba1"),u=s("89cf"),h=s("08e9"),m=s("9489"),p=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("loading",{attrs:{loading:t.loadingClasses}}),!t.loadingClasses&&t.show&&t.classes.length>0?s("div",{staticClass:"row no-wrap q-px-xs q-pt-xs text-left",staticStyle:{"padding-bottom":"200px"}},[s("div",{staticClass:"q-mr-md",staticStyle:{"min-width":"150px"}},[s("q-scroll-area",{staticStyle:{height:"80vh"}},[s("q-list",{staticClass:"no-padding"},t._l(t.classes,(function(e){return s("q-item",{key:e.id,staticClass:"q-pa-xs text-white bg-tertiary q-my-xs",class:e.id===t.selectedClassId?"active-class":"",style:e.id===t.selectedClassId?"border: 2px solid black":"border: 1px solid grey",attrs:{clickable:"",group:"classes",dense:""},on:{click:function(s){return t.setClass(e.id)}}},[s("q-item-section",{attrs:{top:""}},[s("q-item-label",{staticClass:"row"},[s("div",{staticClass:"col text-h7 text-boldx text-font q-mt-xs text-center"},[s("span",{staticClass:"q-mr-md"},[t._v(t._s(e.code))])])])],1)],1)})),1)],1)],1),s("div",{staticClass:"col"},[s("loading",{attrs:{loading:t.loading}}),t.loading?t._e():s("q-markup-table",{attrs:{dense:"",flat:"",bordered:""}},[s("thead",{staticClass:"q-mb-md"},[s("tr",{staticClass:"bg-tertiaryx"},[s("th",{attrs:{colspan:"3"}}),t._l(t.teachers,(function(e){return s("th",{key:e.id,staticClass:"bg-tertiary text-center",attrs:{colspan:t.filteredExams.length}},[t._v("\n              MLO - "+t._s(e.login)+"\n            ")])}))],2),s("tr",{staticClass:"bg-tertiary"},[s("th",{staticClass:"text-left"},[t._v("Name")]),s("th",{staticClass:"text-left"},[t._v("Class")]),s("th",{staticClass:"text-left"},[t._v("Boarding")]),t._l(t.teachers,(function(e){return s("th",{key:e.id,attrs:{colspan:t.filteredExams.length}},[s("table",{staticClass:"full-width no-border"},t._l(t.filteredExams,(function(e){return s("th",{key:e.id,staticClass:"text-center no-border"},[t._v(t._s(e.examCode)+"\n                ")])})),0)])}))],2)]),s("tbody",t._l(t.students,(function(e){return s("tr",{key:e.id},[s("td",{staticClass:"text-left"},[t._v(t._s(e.fullName))]),s("td",{staticClass:"text-left"},[t._v(t._s(t.classCode))]),s("td",{staticClass:"text-left"},[t._v(t._s(e.boardingHouse))]),t._l(t.teachers,(function(a){return s("td",{key:a.id,staticClass:"text-center",attrs:{colspan:t.filteredExams.length}},[s("table",{staticClass:"full-width no-border"},[s("tr",t._l(t.filteredExams,(function(r){return s("td",{key:r.id,staticClass:"q-px-xs text-center no-border"},[t._v(t._s(t.parseMLO(e,r,a)))])})),0)])])}))],2)})),0)])],1)]):t._e()],1)},f=[],g=s("47783"),b=s("452d"),y={getClassMetrics(t,e,s){var a=b["a"].getters["user/getGlobalSubject"];g["a"].get("/hod/"+a.id+"/metrics/class/"+s).then((function(e){t(e.data)})).catch((function(t){console.log(t)}))},getYearMLO(t,e,s,a,r){var i=b["a"].getters["user/getGlobalSubject"];g["a"].get("/hod/"+i.id+"/metrics/year/"+s+"/MLO/"+a,{cancelToken:r}).then((function(e){t(e.data)})).catch((function(t){console.log(t)}))},getYearMetrics(t,e,s,a,r){var i=b["a"].getters["user/getGlobalSubject"];g["a"].get("/hod/"+i.id+"/metrics/year/"+s+"/metrics/"+a,{cancelToken:r}).then((function(e){t(e.data)})).catch((function(t){console.log(t)}))},getYearMetricsSpreadsheet(t,e,s,a,r){var i=b["a"].getters["user/getGlobalSubject"];g["a"].get("/hod/"+i.id+"/metrics/year/"+s+"/metrics/"+a+"/spreadsheet",{cancelToken:r}).then((function(e){t(e.data)})).catch((function(t){console.log(t)}))},getExamHistory(t,e,s,a){var r=b["a"].getters["user/getGlobalSubject"];g["a"].get("/hod/"+r.id+"/metrics/year/"+s+"/history/"+a).then((function(e){t(e.data)})).catch((function(t){console.log(t)}))}},v=s("268c"),x=s("10ac"),C={name:"HOD.Data.MLO",props:{},data(){return{year:null,exam:null,subject:null,students:[],maxMLOCount:4,classes:[],selectedClassId:null,show:!1,exams:[],teachers:[],classCode:[],loading:!1,loadingClasses:!0}},methods:{processMetrics(t){this.exams=t.exams,this.teachers=t.teachers,this.students=t.students,this.maxMLOCount=t.maxMLOCount,this.classCode=t.code,this.loading=!1},processClasses(t){this.classes=t,this.loadingClasses=!1,this.classes.length>0&&(this.show=!0,this.selectedClassId=this.classes[0].id,this.getClassMetrics())},getExamClasses(){this.loadingClasses=!0,this.exam=this.$store.getters["hod/activeExam"],v["a"].getExamClasses(this.processClasses,this.$errorFunction)},getMLO(){this.year=this.$store.getters["hod/activeYear"],this.exam=this.$store.getters["hod/activeExam"],y.getYearMLO(this.process,this.$errorHandler,this.year,this.exam)},setClass(t){this.selectedClassId=t,this.getClassMetrics()},getClassMetrics(){this.loading=!0,this.selectedClassId&&y.getClassMetrics(this.processMetrics,this.$errorHandler,this.selectedClassId)},parseMLO(t,e,s){var a=t.examData.mlo.find((function(t){return t.teacher.id===s.id&&t.examId===e.id}));return a.mlo?a.mlo.mlo_current+" > "+a.mlo.mlo_potential:"."}},computed:{columns(){for(var t=[{name:"id",label:"id",field:"id",type:"string",align:"left",hidden:!0},{name:"Name",label:"Name",field:"displayName",type:"string",align:"left",sortable:!0},{name:"set",label:"Class",field:"classCode",type:"string",align:"left",sortable:!0},{name:"boarding",label:"Boarding",field:"boardingHouse",type:"string",align:"left",sortable:!0},{name:"mlo0",label:"MLO",field:"mlo0",type:"number",align:"left",sortable:!0}],e=1;e<this.maxMLOCount;e++){var s=e+1;t.push({name:"mlo"+e,label:"MLO "+s,field:"mlo"+e,type:"number",align:"left",sortable:!0,hidden:!1})}return t},filteredExams(){var t=this,e=this.exams.filter((function(e){return e.id===t.exam}));return e}},components:{Loading:x["a"]},created(){var t=this;this.subject=this.$store.getters["user/getGlobalSubject"],this.getExamClasses(),this.subjectWatch=this.$store.watch((function(){return t.$store.getters["user/getGlobalSubject"]}),this.getExamClasses),this.yearWatch=this.$store.watch((function(){return t.$store.getters["hod/activeYear"]}),this.getExamClasses),this.examWatch=this.$store.watch((function(){return t.$store.getters["hod/activeExam"]}),this.getExamClasses)},beforeDestroy(){this.subjectWatch(),this.yearWatch(),this.examWatch()}},_=C,k=(s("89754"),s("2be6")),w=s("26a8"),M=s("6c93"),q=s("ac9b"),S=s("66dc"),O=s("7d9a"),j=s("2e0b"),D=s("e279"),L=s.n(D),W=Object(k["a"])(_,p,f,!1,null,"6b80cc44",null),$=W.exports;L()(W,"components",{QScrollArea:w["a"],QList:M["a"],QItem:q["a"],QItemSection:S["a"],QItemLabel:O["a"],QMarkupTable:j["a"]});var I=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("loading",{attrs:{loading:t.loading,channel:"hod.metrics.mlo"}}),t.loading?t._e():s("q-splitter",{staticStyle:{height:"90vh"},scopedSlots:t._u([{key:"before",fn:function(){return[s("div",{staticClass:"q-pa-md"},[s("crud",{ref:"crud",attrs:{dataOverride:t.studentData,columns:t.columns,search:"",sortBy:"set",download:""}})],1)]},proxy:!0},{key:"after",fn:function(){return[s("div",{staticClass:"q-pa-md"},[s("profile-table",{attrs:{profile:t.subject.mloMaxGradeProfile,title:t.subject.maxMLOCount>1?"Max":""}}),s("q-icon",{attrs:{size:"xs",color:"font",name:"fad fa-question-circle"}},[s("q-tooltip",{attrs:{"content-class":"bg-tertiary"}},[t._v("\n            Minimum MLO grade profile for all students and also including a gender breakdown\n          ")])],1),s("profile-pie",{attrs:{profile:t.subject.mloMaxGradeProfile}}),s("q-icon",{attrs:{size:"xs",color:"font",name:"fad fa-question-circle"}},[s("q-tooltip",{attrs:{"content-class":"bg-tertiary"}},[t._v("\n            Maximum MLO grade profile for all students.\n          ")])],1),t.subject.maxMLOCount>1?s("profile-table",{attrs:{profile:t.subject.mloMinGradeProfile,title:"Min"}}):t._e(),t.subject.maxMLOCount>1?s("q-icon",{attrs:{size:"xs",color:"font",name:"fad fa-question-circle"}},[s("q-tooltip",{attrs:{"content-class":"bg-tertiary"}},[t._v("\n            Maximum MLO grade profile for all students and also including a gender breakdown\n          ")])],1):t._e(),t.subject.maxMLOCount>1?s("profile-pie",{attrs:{profile:t.subject.mloMinGradeProfile,title:"Max"}}):t._e(),t.subject.maxMLOCount>1?s("q-icon",{attrs:{size:"xs",color:"font",name:"fad fa-question-circle"}},[s("q-tooltip",{attrs:{"content-class":"bg-tertiary"}},[t._v("\n            Minimum MLO grade profile for all students.\n          ")])],1):t._e()],1)]},proxy:!0}],null,!1,3716565943),model:{value:t.splitter,callback:function(e){t.splitter=e},expression:"splitter"}})],1)},E=[],P=s("d612"),G=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("q-markup-table",{staticClass:"q-mt-xs q-my-md",attrs:{dense:"",flat:"",bordered:""}},[s("thead",{staticClass:"q-mb-md"},[s("tr",{staticClass:"bg-tertiary"},[s("th",{staticClass:"text-left"},[t._v(t._s(t.title))]),t._l(t.ordered,(function(e){return s("th",{key:e.grade},[t._v("\n        "+t._s("GCSE Avg"!==e.grade?e.grade:"")+"\n      ")])}))],2)]),s("tbody",[s("tr",[s("td",{staticClass:"text-left"},[t._v("All")]),t._l(t.ordered,(function(e){return s("td",{key:e.grade,staticClass:"text-center"},[t._v("\n        "+t._s("GCSE Avg"!==e.grade?e.count:"")+"\n      ")])}))],2),s("tr",[s("td",{staticClass:"text-left"},[t._v("Boys")]),t._l(t.ordered,(function(e){return s("td",{key:e.grade,staticClass:"text-center"},[t._v("\n        "+t._s(e.countM)+"\n      ")])}))],2),s("tr",[s("td",{staticClass:"text-left"},[t._v("Girls")]),t._l(t.ordered,(function(e){return s("td",{key:e.grade,staticClass:"text-center"},[t._v("\n        "+t._s(e.countF)+"\n      ")])}))],2)])])},T=[],A=(s("4fb0"),{name:"HOD.Metrics.MLO.ProfileTable",props:{profile:{type:Array,required:!0},title:{tyle:String,default:""}},data(){return{}},computed:{ordered(){return parseInt(this.profile[0])<7?this.profile.split().reverse():this.profile}},watch:{},components:{},created(){}}),Y=A,N=Object(k["a"])(Y,G,T,!1,null,"b8218506",null),B=N.exports;L()(N,"components",{QMarkupTable:j["a"]});var H=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("div",{ref:"pie"})])},Q=[],F=s("915b"),R=s("3099"),z=s("d610");F["f"](z["a"]);var U={name:"HOD.Metrics.MLO.ProfileTable",props:{profile:{type:Array,required:!0},title:{tyle:String,default:""}},data(){return{pie:null}},methods:{createPie(){var t=this.profileData;this.pie=F["c"](this.$refs.pie,R["h"]);var e=this.pie,s=e.series.push(new R["i"]);s.dataFields.value="count",s.dataFields.category="grade",e.innerRadius=F["e"](30),s.slices.template.stroke=F["b"]("#fff"),s.slices.template.strokeWidth=2,s.slices.template.strokeOpacity=1,s.slices.template.cursorOverStyle=[{property:"cursor",value:"pointer"}],s.alignLabels=!0,s.labels.template.bent=!0,s.labels.template.radius=3,s.labels.template.padding(0,0,0,0),s.ticks.template.disabled=!0;var a=s.slices.template.filters.push(new F["a"]);a.opacity=0;var r=s.slices.template.states.getKey("hover"),i=r.filters.push(new F["a"]);i.opacity=.7,i.blur=5,e.data=t}},computed:{profileData(){var t=[];return this.profile.forEach((function(e){"GCSE Avg"!==e.grade&&t.push(e)})),t}},watch:{},components:{},created(){},mounted(){this.createPie()},beforeDestroy(){this.pie.dispose()}},K=U,X=Object(k["a"])(K,H,Q,!1,null,"4e711b94",null),J=X.exports,V=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("div",{ref:"stacked",staticStyle:{height:"200px"}})])},Z=[],tt=(s("c880"),s("3903"));F["f"](tt["a"]);var et={name:"HOD.Metrics.MLO.ProfileTable",props:{profile:{type:Array,required:!0},title:{tyle:String,default:""}},data(){return{stacked:null,chart:null}},methods:{createStacked(){this.stacked&&this.stacked.dispose();var t=F["c"](this.$refs.stacked,R["l"]);t.colors.list=[F["b"]("#845EC2"),F["b"]("#D65DB1"),F["b"]("#FF6F91"),F["b"]("#FF9671"),F["b"]("#FFC75F"),F["b"]("#F9F871")],this.stacked=t,t.hiddenState.properties.opacity=0,t.colors.step=4,t.padding(10,10,10,10);var e=t.xAxes.push(new R["a"]);e.dataFields.category="type",e.renderer.grid.template.location=0,e.renderer.minGridDistance=50;var s=t.yAxes.push(new R["k"]);s.min=0,s.max=100,s.strictMinMax=!0,s.calculateTotals=!0,s.renderer.minWidth=50,t.data=this.stackData(),t.legend=new R["f"]},addStackSeries(t,e){var s=t.series.push(new R["c"]);s.sequencedInterpolation=!0,s.columns.template.width=F["e"](80),s.columns.template.tooltipText="[bold]{name}[/][font-size:14px]: {valueY.totalPercent.formatNumber('#.00')}%",s.name=e,s.dataFields.categoryX="type",s.dataFields.valueY=e,s.dataFields.valueYShow="totalPercent",s.dataItems.template.locations.categoryX=.5,s.stacked=!0,s.tooltip.pointerOrientation="vertical"},stackData(){var t=this,e=[],s=[],a={},r={},i={};return this.profile.forEach((function(t){var s=t.grade;e.push(s),a.type="All",a[s]=t.count,r.type="Boys",r[s]=t.countM,i.type="Girls",i[s]=t.countF})),s.push(a),s.push(r),s.push(i),e.forEach((function(e){t.addStackSeries(t.stacked,e)})),s}},computed:{},watch:{},components:{},created(){},mounted(){this.createStacked()},beforeDestroy(){this.stacked.dispose()}},st=et,at=Object(k["a"])(st,V,Z,!1,null,"53fe8ee4",null),rt=at.exports,it={name:"HOD.Data.MLO",props:{},data(){return{year:null,exam:null,subject:null,students:[],maxMLOCount:4,splitter:60,loading:!0}},methods:{process(t){this.students=t.students,this.maxMLOCount=t.maxMLOCount,this.subject=t,this.loading=!1},getMLO(){this.year=this.$store.getters["hod/activeYear"],this.exam=this.$store.getters["hod/activeExam"],this.loading=!0,y.getYearMLO(this.process,this.$errorFunction,this.year,this.exam)}},computed:{columns(){return this.subject.maxMLOCount>1?[{name:"id",label:"id",field:"id",type:"string",align:"left",hidden:!0},{name:"Name",label:"Name",field:"displayName",type:"string",align:"left",sortable:!0},{name:"schNumber",label:"Sch. #",field:"schoolNumber",type:"string",align:"left",sortable:!0},{name:"set",label:"Class",field:"classCode",type:"string",align:"left",sortable:!0},{name:"mloMin",label:"Min MLO",field:"mloMin",type:"string",align:"left",sortable:!0},{name:"mloMax",label:"Max MLO",field:"mloMax",type:"string",align:"left",sortable:!0}]:[{name:"id",label:"id",field:"id",type:"string",align:"left",hidden:!0},{name:"Name",label:"Name",field:"displayName",type:"string",align:"left",sortable:!0},{name:"schNumber",label:"Sch. #",field:"schoolNumber",type:"string",align:"left",sortable:!0},{name:"set",label:"Class",field:"classCode",type:"string",align:"left",sortable:!0},{name:"mloMin",label:"MLO",field:"mloMin",type:"string",align:"left",sortable:!0}]},studentData(){var t=this,e=this.students.map((function(e){var s={id:e.id,displayName:e.displayName,classCode:e.classCode,schoolNumber:e.schoolNumber},a=e.exams.find((function(e){return e.id===t.exam}));return a&&(s.mloMin=a.mloMin,s.mloMax=a.mloMax),s}));return e}},watch:{},components:{Crud:P["a"],ProfileTable:B,Loading:x["a"],ProfilePie:J,ProfileStack:rt},created(){var t=this;this.subject=this.$store.getters["user/getGlobalSubject"],this.getMLO(),this.subjectWatch=this.$store.watch((function(){return t.$store.getters["user/getGlobalSubject"]}),this.getMLO),this.yearWatch=this.$store.watch((function(){return t.$store.getters["hod/activeYear"]}),this.getMLO),this.examWatch=this.$store.watch((function(){return t.$store.getters["hod/activeExam"]}),this.getMLO)},beforeDestroy(){this.subjectWatch&&this.subjectWatch(),this.yearWatch&&this.yearWatch(),this.examWatch&&this.examWatch()}},nt=it,lt=(s("ada9"),s("bc4f")),ot=s("34ff"),ct=s("3aaf"),dt=Object(k["a"])(nt,I,E,!1,null,"176e1f66",null),ut=dt.exports;L()(dt,"components",{QSplitter:lt["a"],QIcon:ot["a"],QTooltip:ct["a"]});var ht=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("loading",{attrs:{loading:t.loading,channel:"hod.metrics.history"}}),t.loading?t._e():s("history-table",{key:t.componentKey,attrs:{history:t.subject.history,grades:t.subject.grades,bands:t.subject.bands,bandedHistory:t.subject.bandedHistory}}),t.loading?t._e():s("history-stack",{key:t.componentKey,ref:"stack",attrs:{id:"1",profile:t.subject.stackedHistory,grades:t.subject.grades}})],1)},mt=[],pt=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("div",{staticClass:"row"},[s("q-btn-toggle",{staticClass:"col q-ml-xs",attrs:{spread:"","no-caps":"",dense:"",outline:"","toggle-color":"tertiary",color:"secondary","text-color":"font-secondary","toggle-text-color":"accent",options:t.styles,year:"full-width"},model:{value:t.style,callback:function(e){t.style=e},expression:"style"}}),s("q-btn-toggle",{staticClass:"col q-ml-xs",attrs:{outline:"",spread:"","no-caps":"",dense:"","toggle-color":"tertiary",color:"secondary","text-color":"font-secondary","toggle-text-color":"accent",options:t.modes,year:"full-width"},model:{value:t.mode,callback:function(e){t.mode=e},expression:"mode"}})],1),"linear"===t.style?s("q-markup-table",{staticClass:"q-mt-xs q-my-md",attrs:{dense:"",flat:"",bordered:""}},[s("thead",{staticClass:"q-mb-md"},[s("tr",{staticClass:"bg-tertiary"},[s("th",{staticClass:"text-right"},[t._v(t._s("percentage"===t.mode?"%":"Abs"))]),t._l(t.grades,(function(e){return s("th",{key:e.grade},[t._v("\n          "+t._s(e.grade)+"\n          "),"GCSE Avg"===e.grade?s("q-icon",{attrs:{size:"xs",color:"font",name:"fad fa-question-circle"}},[s("q-tooltip",{attrs:{"content-class":"bg-tertiary"}},[t._v("\n              The average GCSE grades of the pupils taking the subject in a given year.\n            ")])],1):t._e()],1)})),s("th")],2)]),s("tbody",t._l(t.history,(function(e){return s("tr",{key:e.year},[s("td",{staticClass:"text-right"},[t._v(t._s(e.year))]),t._l(t.grades,(function(a){return s("td",{key:a.grade,staticClass:"text-center"},[t._v("\n          "+t._s(t.getGrade(a.grade,e))+"\n        ")])})),s("td")],2)})),0)]):t._e(),"banded"===t.style?s("q-markup-table",{staticClass:"q-mt-xs q-my-md",attrs:{dense:"",flat:"",bordered:""}},[s("thead",{staticClass:"q-mb-md"},[s("tr",{staticClass:"bg-tertiary"},[s("th",{staticClass:"text-right"},[t._v(t._s("percentage"===t.mode?"%":"Abs"))]),t._l(t.bands,(function(e){return s("th",{key:e},[t._v("\n          "+t._s(e)+"\n          "),"GCSE Avg"===e?s("q-icon",{attrs:{size:"xs",color:"font",name:"fad fa-question-circle"}},[s("q-tooltip",{attrs:{"content-class":"bg-tertiary"}},[t._v("\n              The average GCSE grades of the pupils taking the subject in a given year.\n            ")])],1):t._e()],1)})),s("th")],2)]),s("tbody",t._l(t.bandedHistory,(function(e){return s("tr",{key:e.year},[s("td",{staticClass:"text-right"},[t._v(t._s(e.year))]),t._l(t.bands,(function(a){return s("td",{key:a.bands,staticClass:"text-center"},[t._v("\n          "+t._s(t.getBandData(a,e))+"\n        ")])})),s("td",["Avg Last 3 Yrs"===e.year?s("q-icon",{attrs:{size:"xs",color:"font",name:"fad fa-question-circle"}},[s("q-tooltip",{attrs:{"content-class":"bg-tertiary"}},[t._v("\n              Last 3 (if available) year's grades are treated as a single cohort with the final absolute values divided by 3.\n            ")])],1):t._e()],1)],2)})),0)]):t._e()],1)},ft=[],gt={name:"HOD.Metrics.MLO.ProfileTable",props:{history:{type:Array,required:!0},bandedHistory:{type:Array,required:!0},grades:{type:Array,required:!0},bands:{type:Array,required:!0},title:{tyle:String,default:""}},data(){return{mode:"percentage",modes:[{value:"percentage",label:"Percentage"},{value:"absolute",label:"Absolute"}],style:"banded",styles:[{value:"banded",label:"Banded"},{value:"linear",label:"Linear"}]}},computed:{ordered(){return parseInt(this.profile[0])<7?this.profile.split().reverse():this.profile}},methods:{getGrade(t,e){var s=e.results.find((function(e){return e.grade===t}));return s?"absolute"===this.mode||"GCSE Avg"===t?s.count:s.pct:"-"},getBandData(t,e){var s=e.results.find((function(e){return e.band===t}));if(!s)return"-";var a="absolute"===this.mode?s.abs:s.pct;return 0===a?"":a}},watch:{},components:{},created(){}},bt=gt,yt=s("6dd6"),vt=Object(k["a"])(bt,pt,ft,!1,null,"5191f8cd",null),xt=vt.exports;L()(vt,"components",{QBtnToggle:yt["a"],QMarkupTable:j["a"],QIcon:ot["a"],QTooltip:ct["a"]});var Ct=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("div",{ref:"stacked",staticStyle:{height:"200px"}})])},_t=[];F["f"](tt["a"]);var kt={name:"HOD.Metrics.MLO.HistoryStack",props:{profile:{type:Array,required:!0},grades:{type:Array,required:!0},title:{tyle:String,default:""}},data(){return{stacked:null,chart:null}},methods:{createStacked(){var t=F["c"](this.$refs.stacked,R["l"]);this.stacked=t,t.hiddenState.properties.opacity=0,t.colors.step=4,t.padding(10,10,10,10);var e=t.xAxes.push(new R["a"]);e.dataFields.category="year",e.renderer.grid.template.location=0,e.renderer.minGridDistance=50;var s=t.yAxes.push(new R["k"]);s.min=0,s.max=100,s.strictMinMax=!0,s.calculateTotals=!0,s.renderer.minWidth=50,t.data=this.stackData()},addStackSeries(t,e){var s=t.series.push(new R["c"]);s.sequencedInterpolation=!0,s.columns.template.width=F["e"](80),s.columns.template.tooltipText="[bold]{name}[/][font-size:14px]: {valueY.totalPercent.formatNumber('#.00')}%",s.name=e,s.dataFields.categoryX="year",s.dataFields.valueY=e,s.dataFields.valueYShow="totalPercent",s.dataItems.template.locations.categoryX=.5,s.stacked=!0,s.tooltip.pointerOrientation="vertical";var a=this.getColor(e);s.fill=F["b"](a)},getColor(t){var e="";switch(t){case"9":case"D1":e="#FF00FF";break;case"D2":case"A*":case"8":e="#9900ff";break;case"D3":case"A":case"7":e="#0000ff";break;case"M1":case"B":case"6":e="#4a86e8";break;case"M2":case"C":case"5":e="#00ffff";break;case"M3":case"D":case"4":e="#00ff00";break;case"P1":case"E":case"3":e="#ffff00";break;case"P2":case"2":e="#ff9900";break;case"U":e="#ff0000";break;default:e="#980000"}return e},stackData(){var t=this;return this.grades.forEach((function(e){Number.isInteger(e.grade)||t.stacked.colors.reset(),"GCSE Avg"!==e.grade&&t.addStackSeries(t.stacked,e.grade)})),this.profile}},computed:{},watch:{},components:{},created(){},mounted(){this.createStacked()},beforeDestroy(){this.stacked.dispose()}},wt=kt,Mt=Object(k["a"])(wt,Ct,_t,!1,null,"5e19ad04",null),qt=Mt.exports,St=s("8206"),Ot=s.n(St),jt={name:"HOD.Data.MLO",props:{},data(){return{year:null,exam:null,subject:null,students:[],maxMLOCount:4,splitter:60,loading:!0,request:null,componentKey:1}},methods:{process(t){t.year===this.year&&t.id===this.subject.id&&t.examId===this.exam&&(this.componentKey++,this.students=t.students,this.maxMLOCount=t.maxMLOCount,this.subject=t,this.loading=!1)},getHistory(){this.loading=!0,this.request&&this.request.cancel(),this.request=Ot.a.CancelToken.source(),this.year=this.$store.getters["hod/activeYear"],this.exam=this.$store.getters["hod/activeExam"],this.subject=this.$store.getters["user/getGlobalSubject"],y.getExamHistory(this.process,this.$errorFunction,this.year,this.exam,this.request)}},computed:{},watch:{},components:{HistoryTable:xt,HistoryStack:qt,Loading:x["a"]},created(){var t=this;this.subject=this.$store.getters["user/getGlobalSubject"],this.getHistory(),this.subWatch=this.$store.watch((function(){return t.$store.getters["user/getGlobalSubject"]}),this.getHistory),this.yearWatch=this.$store.watch((function(){return t.$store.getters["hod/activeYear"]}),this.getHistory),this.examWatch=this.$store.watch((function(){return t.$store.getters["hod/activeExam"]}),this.getHistory)},beforeDestroy(){this.subWatch(),this.yearWatch(),this.examWatch()}},Dt=jt,Lt=(s("f1e9"),Object(k["a"])(Dt,ht,mt,!1,null,"7c11e2db",null)),Wt=Lt.exports,$t=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"q-pr-sm col row"},[t.loading?s("loading",{staticClass:"full-width",attrs:{loading:t.loading,channel:"hod.metrics.metrics"}}):t._e(),t.loading?t._e():s("div",{staticClass:"col column ada-table"},[s("q-bar",{staticClass:"bg-tertiary full-width bd-font-secondary overflow-hidden q-pl-sm"},[s("q-input",{staticStyle:{width:"300px"},attrs:{filled:"",dense:""},scopedSlots:t._u([{key:"before",fn:function(){return[s("q-icon",{attrs:{name:"search"}})]},proxy:!0}],null,!1,2736547555),model:{value:t.searchTerm,callback:function(e){t.searchTerm=e},expression:"searchTerm"}}),s("q-btn",{attrs:{flat:"",icon:"fad fa-download",labelX:"sheet",styleX:"width:200px"},on:{click:t.getSpreadSheet}}),s("q-toggle",{staticClass:"text-font q-mr-md",staticStyle:{"font-size":"10px"},attrs:{label:"Baseline Data","left-label":"",dense:"",size:"sm",color:"accent"},model:{value:t.showBaselineData,callback:function(e){t.showBaselineData=e},expression:"showBaselineData"}}),s("q-toggle",{staticClass:"text-font",staticStyle:{"font-size":"10px"},attrs:{label:"Meta Data","left-label":"",dense:"",size:"sm",color:"accent"},model:{value:t.showMetaData,callback:function(e){t.showMetaData=e},expression:"showMetaData"}}),s("q-space"),t.selectedWyapId?s("q-btn",{attrs:{icon:t.swarmOpen?"fas fa-arrow-right":"fas fa-arrow-left",disable:!t.selectedWyapId,color:"font",flat:"",dense:""},on:{click:function(e){t.swarmOpen=!t.swarmOpen}}}):t._e()],1),s("div",{staticClass:"col column q-mt-md",staticStyle:{"min-width":"300px"}},[s("q-scroll-area",{staticClass:"column col q-pb-xl"},[s("q-markup-table",{staticClass:"q-mb-xl q-pb-md",staticStyle:{"max-width":"100%","white-space":"nowrap"},attrs:{dense:"",flat:"",bordered:""}},[s("thead",{staticClass:"q-mb-md"},[s("tr",{staticClass:"bg-tertiary"},[s("th",{attrs:{colspan:t.columnCount}}),t.subject.wyaps.length>0?s("th",{staticClass:"text-positive",attrs:{colspan:"2"},on:{click:function(e){return t.setWyapSort("totals")}}},[t._v("\n                    WYAP Totals\n                    "),s("q-icon",{staticClass:"q-ml-xs",attrs:{name:"fal fa-arrows-alt-v",color:"accent"}})],1):t._e(),t._l(t.subject.wyaps,(function(e,a){return s("th",{key:e.id,staticClass:"text-center",attrs:{colspan:"2"},on:{click:function(s){return t.setWyapSort(e.id)}}},[t._v("\n                      WYAP "+t._s(t.subject.wyaps.length-a)+"\n                      "),s("q-icon",{staticClass:"q-ml-xs",attrs:{name:"fal fa-arrows-alt-v",color:"accent"}}),s("q-tooltip",[t._v(t._s(e.name))])],1)})),s("th",{staticClass:"absorbing-column"})],2),s("tr",{staticClass:"bg-tertiary"},[t._l(t.columns,(function(e){return e.hidden?t._e():s("th",{key:e.name,staticClass:"text-left",on:{click:function(s){return t.setSort(e.field)}}},[t._v("\n                      "+t._s(e.label)+"\n                      "),s("q-icon",{staticClass:"q-ml-xs",attrs:{name:"fal fa-arrows-alt-v",color:"accent"}})],1)})),t.subject.wyaps.length>0?s("th",{staticClass:"text-center",on:{click:function(e){return t.setWyap("totals")}}},[t._v("%\n                      ")]):t._e(),t.subject.wyaps.length>0?s("th",{staticClass:"text-center",on:{click:function(e){return t.setWyap("totals")}}},[t._v("Rnk\n                    ")]):t._e(),t._l(t.subject.wyaps,(function(e){return[s("th",{key:e.id+"_",staticClass:"text-center",on:{click:function(s){return t.setWyap(e.id)}}},[t._v("%\n                        ")]),s("th",{key:e.id,staticClass:"text-center",on:{click:function(s){return t.setWyap(e.id)}}},[t._v(t._s(t.showMetaData?"":"Rnk")+"\n                        ")])]})),s("th",{staticClass:"absorbing-column"})],2)]),s("tbody",t._l(t.visibleStudents,(function(e){return s("tr",{key:e.id,class:{"bg-font-secondary text-font-negative":e.id===t.selectedStudentId},on:{click:function(s){t.selectedStudentId=e.id}}},[t._l(t.columns,(function(a){return a.hidden?t._e():s("td",{key:a.name,staticClass:"text-left"},[t._v("\n                      "+t._s(e[a.field])+"\n                    ")])})),t.subject.wyaps.length>0?s("td",{staticClass:"text-center",class:{"bg-tertiary":e.id!==t.selectedStudentId&&"totals"!==t.selectedWyapId,"bg-font-secondary text-font-negative":"totals"===t.selectedWyapId},on:{click:function(s){return t.setWyap("totals",e.id)}}},[t._v("\n                        "+t._s(t.wyapTotalsPct(e.id))+"\n                    ")]):t._e(),t.subject.wyaps.length>0?s("td",{staticClass:"text-center",class:{"bg-tertiary":e.id!==t.selectedStudentId&&"totals"!==t.selectedWyapId,"bg-font-secondary text-font-negative":"totals"===t.selectedWyapId},on:{click:function(s){return t.setWyap("totals",e.id)}}},[t._v("\n                        "+t._s(t.wyapTotalsRank(e.id))+"\n                    ")]):t._e(),t._l(t.subject.wyaps,(function(a,r){return[s("td",{key:a.id+"_",staticClass:"text-center",class:{"bg-tertiary":r%2===1&&e.id!==t.selectedStudentId&&a.id!==t.selectedWyapId,"bg-font-secondary text-font-negative":a.id===t.selectedWyapId},on:{click:function(s){return t.setWyap(a.id,e.id)}}},[t._v("\n                        "+t._s(t.wyapPct(e.id,a.id))+"\n                    ")]),t.showMetaData?t._e():s("td",{key:a.id,staticClass:"text-center",class:{"bg-tertiary":r%2===1&&e.id!==t.selectedStudentId&&a.id!==t.selectedWyapId,"bg-font-secondary text-font-negative":a.id===t.selectedWyapId},on:{click:function(s){return t.setWyap(a.id,e.id)}}},[t._v("\n                        "+t._s(t.wyapRank(e.id,a.id))+"\n                    ")]),t.showMetaData?s("td",{key:a.id,staticClass:"text-left",class:{"bg-tertiary":r%2===1&&e.id!==t.selectedStudentId&&a.id!==t.selectedWyapId,"bg-font-secondary text-font-negative":a.id===t.selectedWyapId},on:{click:function(s){return t.setWyap(a.id,e.id)}}},[t.wyapExtraTime(e.id,a.id)?s("q-badge",{staticClass:"q-mr-xs",attrs:{color:"positive"}},[s("q-icon",{attrs:{name:"far fa-clock",color:"primary"}}),s("q-tooltip",{staticClass:"bg-font-secondary"},[t._v("Used Extra Time")])],1):t._e(),t.wyapUnderperformed(e.id,a.id)?s("q-badge",{staticClass:"q-mr-xs",attrs:{color:"warning"}},[s("q-icon",{attrs:{name:"far fa-thumbs-down",color:"white"}}),s("q-tooltip",{staticClass:"bg-font-secondary"},[t._v("Underperformed")])],1):t._e(),t.wyapComment(e.id,a.id)?s("q-badge",{attrs:{color:"positive",outline:""}},[s("q-icon",{attrs:{name:"far fa-sticky-note",color:"positive"}}),s("q-tooltip",{staticClass:"bg-font-secondary"},[t._v(t._s(t.wyapComment(e.id,a.id)))])],1):t._e()],1):t._e()]})),s("td",{staticClass:"absorbing-column"})],2)})),0)])],1)],1)],1),t.showSwarm?s("div",{staticClass:"row column",staticStyle:{"max-width":"300px",width:"300px"}},[s("swarm",{attrs:{results:t.swarmResults,title:t.swarmTitle,selectedStudentId:t.selectedStudentId},on:{fullscreen:function(e){t.classTableOpen=!0}}})],1):t._e(),s("q-dialog",{attrs:{maximized:""},model:{value:t.classTableOpen,callback:function(e){t.classTableOpen=e},expression:"classTableOpen"}},[s("q-card",{staticClass:"full-width column bg-primary",staticStyle:{height:"100vh"}},[s("classTable",{staticClass:"col column full-width",attrs:{title:t.swarmTitle,"full-screen":"",results:t.swarmResults,wyap:t.wyap},on:{close:function(e){t.classTableOpen=!1}}})],1)],1)],1)},It=[],Et=(s("632c"),function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"q-pr-sm q-ml-sm col column"},[s("loading",{attrs:{loading:t.loading,message:"Crunching some numbers..."}}),!t.loading&&t.results.length>0?s("div",{staticClass:"row col column"},[s("div",{ref:"scrollzone",staticClass:"col q-mt-none column",attrs:{id:"scrollzone"}},[s("q-scroll-area",{staticClass:"column col"},[s("q-markup-table",{staticClass:"q-pb-sm col column bg-primary bd-font",attrs:{dense:"",flat:"",bordered:""}},[s("thead",{staticClass:"q-pb-md"},[s("tr",{staticClass:"bg-tertiary",staticStyle:{"max-height":"8px",height:"8px","overflow-y":"hidden"}},t._l(t.data,(function(e){return s("th",{key:e.name,staticClass:"text-center"},[s("q-bar",{staticClass:"bg-tertiary q-px-none",staticStyle:{"font-size":"13px"}},[t._v("\n                  "+t._s(e.name)+"\n                  "),s("q-space"),s("q-btn",{attrs:{icon:"fas fa-expand-arrows-alt",flat:"",color:"positive",size:"xs",dense:""},on:{click:function(e){return t.$emit("fullscreen")}}})],1)],1)})),0)]),s("tbody",{staticClass:"bg-primary q-mt-md",staticStyle:{"font-size":"5px"}},t._l(101,(function(e){return s("tr",{key:e,staticClass:"ct-row db-primary ct-border"},t._l(t.data,(function(a){return s("td",{key:a.name,staticClass:"ct-row ct-border text-center bg-primary",class:{"bg-secondary":(102-e)%10==0&&!t.isYearAverage(102-e,a),"bg-accent-secondary":t.isYearAverage(102-e,a),"":!t.isYearAverage(102-e,a)},style:t.rowStyle},[t._l(t.getPctResults(a,102-e),(function(e){return"names"===t.mode?s("span",{key:e.id,staticClass:"q-mx-xs",class:t.nameClass(e)},[t._v(t._s(e.lastName))]):t._e()})),t._l(t.getPctResults(a,102-e),(function(e){return"names"!==t.mode&&e.id===t.selectedStudentId?s("q-spinner-facebook",{key:e.id,attrs:{color:"positive",size:"10px"}}):t._e()})),t._l(t.getPctResults(a,102-e),(function(e){return"names"!==t.mode&&e.id!==t.selectedStudentId?s("q-btn",{key:e.id,staticClass:"q-pa-none",class:{blink:e.id===t.selectedStudentId},staticStyle:{"max-height":"1px",height:"1px","font-size":"8px","padding-top":"0px","padding-bottom":"0px","margin-left":"1px","margin-right":"1px"},attrs:{color:t.badgeColor(e),"text-color":t.badgeColor(e),label:t.badgeLabel(e),size:"xs",dense:""},on:{click:function(s){return t.showResult(e)}}},[t._v(".\n                  "),s("q-tooltip",{attrs:{"content-class":"bg-font-secondary"}},[s("p",{staticClass:"text-bold"},[t._v(t._s(e.name))]),s("p",[t._v(t._s(e.pct)+"%")])])],1):t._e()})),t.isYearAverage(102-e,a)?s("q-tooltip",[t._v("Class Average "+t._s(a.averagePct)+"%")]):t._e()],2)})),0)})),0)])],1)],1)]):t._e()],1)}),Pt=[],Gt={name:"hods.metrics.wyaps.results",props:{results:{type:Array,required:!0},title:{type:String,required:!0},fullScreen:{type:Boolean},selectedStudentId:{type:Number}},data(){return{mode:"flagged",data:[],loading:!1,modeOptions:[{icon:"fas fa-flag",value:"flagged",slot:"flagged"},{icon:"fas fa-venus-mars",value:"gender",slot:"gender"},{icon:"fas fa-user",value:"names",slot:"names"}],meanPct:0,mounted:!1}},methods:{getPctResults(t,e){return e<1||e>100?[]:t.results.find((function(t){return t.pct===e})).results},nameClass(t){return t.hasUnderperformed?"text-warning":"font-secondary"},badgeColor(t){return t.id===this.selectedStudentId?"positive":"gender"===this.mode?"F"===t.gender?"red-3":"blue-4":t.hasUnderperformed?"warning":"font"},badgeLabel(t){return"names"===this.mode?t.lastName:"."},rowBgColor(t){return Math.round(t)===Math.round(this.meanPct)?"bg-accent-secondary ct-border":"bg-secondary ct-border"},isYearAverage(t){return Math.round(t)===Math.round(this.meanPct)},makeData(){this.loading=!0;for(var t=[],e=this,s=0,a=0,r={name:this.title,results:[],averagePct:0},i=100;i>0;i--){var n=e.results.filter((function(t){return Math.round(t.pct)===i})),l={pct:i,results:n};s+=i*n.length,a+=n.length,r.results.push(l)}a>0&&(r.averagePct=Math.round(s/a)),t.push(r),this.data=t,this.loading=!1}},computed:{visible(){return this.results},sorted(){var t=this.visible.filter((function(t){return t.id>0}));return t.sort(this.$compare(this.sortKey,this.sortDir))},rowStyle(){if(!this.mounted)return{};var t="4px!important",e={"line-height":t,"max-height":t,height:t,"font-size":t};return e}},watch:{results:{deep:!0,handler(){this.makeData()}},selectedStudentId(t){this.makeData()}},components:{Loading:x["a"]},created(){this.makeData()},mounted(){this.mounted=!0}},Tt=Gt,At=(s("114f"),s("bc74")),Yt=s("5d16"),Nt=s("f962c"),Bt=s("2ef0"),Ht=s("3972"),Qt=s("dfd0"),Ft=Object(k["a"])(Tt,Et,Pt,!1,null,null,null),Rt=Ft.exports;L()(Ft,"components",{QInput:At["a"],QScrollArea:w["a"],QMarkupTable:j["a"],QBar:Yt["a"],QSpace:Nt["a"],QBtn:Bt["a"],QSpinnerFacebook:Ht["a"],QTooltip:ct["a"],QColor:Qt["a"]});var zt=s("f21d"),Ut={name:"HOD.Data.MLO",props:{},data(){return{searchTerm:"",year:null,exam:null,subject:null,students:[],maxMLOCount:4,splitter:100,loading:!0,metrics:!1,controlsOpen:!1,maximizedToggle:!1,sortKey:"displayName",sortDir:"asc",splitterModel:80,swarmResults:[],swarmTitle:"",selectedStudentId:null,selectedWyapId:null,showBaselineData:!1,showMetaData:!1,swarmOpen:!0,classTableOpen:!1,wyap:{}}},methods:{setSort(t){t===this.sortKey&&(this.sortDir="asc"===this.sortDir?"desc":"asc"),this.sortKey=t},setWyapSort(t){var e="wyap_"+t+"_rank";this.selectedWyapId=t,e===this.sortKey&&(this.sortDir="asc"===this.sortDir?"desc":"asc"),this.sortKey=e},process(t){this.students=t.students,this.maxMLOCount=t.maxMLOCount,this.subject=t,this.metrics=t.metrics,this.loading=!1},getMetrics(){this.selectedWyapId=null,this.selectedStudentId=null,this.year=this.$store.getters["hod/activeYear"],this.exam=this.$store.getters["hod/activeExam"],this.loading=!0,y.getYearMetrics(this.process,this.$errorFunction,this.year,this.exam)},openControls(){},getSpreadSheet(){var t=this;this.year=this.$store.getters["hod/activeYear"],this.exam=this.$store.getters["hod/activeExam"],this.loading=!0,y.getYearMetricsSpreadsheet((function(e){t.loading=!1,t.$downloadBlob(e.url,e.file)}),(function(e){t.loading=!1}),this.year,this.exam)},wyapRank(t,e){var s="wyap_"+e+"_rank",a=this.subject.students.find((function(e){return e.id===t}));if(a)return a[s]},wyapPct(t,e){var s="wyap_"+e+"_pct",a=this.subject.students.find((function(e){return e.id===t}));if(a)return a[s]},wyapTotalsRank(t){var e="wyap_totals_rank",s=this.subject.students.find((function(e){return e.id===t}));if(s)return s[e]},wyapTotalsPct(t,e){var s="wyap_totals_pct",a=this.subject.students.find((function(e){return e.id===t}));if(a)return a[s]},wyapExtraTime(t,e){var s="wyap_"+e+"_hasUsedExtraTime",a=this.subject.students.find((function(e){return e.id===t}));if(a)return a[s]},wyapUnderperformed(t,e){var s="wyap_"+e+"_hasUnderperformed",a=this.subject.students.find((function(e){return e.id===t}));if(a)return a[s]},wyapComment(t,e){var s="wyap_"+e+"_comment",a=this.subject.students.find((function(e){return e.id===t}));if(a)return a[s]},setWyap(t,e){this.selectedWyapId=t,e&&(this.selectedStudentId=e),this.swarmResults=this.subject.students.map((function(e){var s="wyap_"+t+"_";return{id:e.id,name:e.fullPreName,lastName:e.lastName,house:e.boardingHouse,pct:e[s+"pct"],percentage:e[s+"pct"],mark:e[s+"mark"],gender:e.gender,classCode:e.classCode,boarding:e.boardingHouse,rank:e[s+"rank"],comment:e[s+"comment"],hasUnderperformed:e[s+"hasUnderperformed"],hasUsedExtraTime:e[s+"hasUsedExtraTime"]}}));var s=this.subject.wyaps.find((function(e){return e.id===t}))||{};this.wyap=s,this.swarmTitle="totals"===t?"WYAP Totals":s.name}},computed:{visibleStudents(){var t=this;return 0===this.searchTerm.length?this.studentData:this.studentData.filter((function(e){return-1!==e.displayName.toLowerCase().indexOf(t.searchTerm.toLowerCase())}))},columns(){var t;return t=(this.subject.maxMLOCount,[{name:"id",label:"id",field:"id",type:"string",align:"left",hidden:!0},{name:"Name",label:"Name",field:"displayName",type:"string",align:"left",sortable:!0},{name:"house",label:"House",field:"boardingHouseCode",type:"string",align:"left",sortable:!0},{name:"class",label:"Class",field:"classCode",type:"string",align:"left",sortable:!0}]),this.metrics.ALevelMock.length>0&&(t.push({name:"aLevelMockGrade",label:"U6 Mock",field:"aLevelMockGrade",type:"string",align:"left",sortable:!0}),t.push({name:"aLevelMockPercentage",label:"%",field:"aLevelMockPercentage",type:"string",align:"left",sortable:!0}),t.push({name:"aLevelMockRank",label:"Rank",field:"aLevelMockRank",type:"string",align:"left",sortable:!0})),this.metrics?(this.metrics.GCSE.length>0&&this.showBaselineData&&(t.push({name:"gcseGrade",label:"GCSE",field:"gcseGrade",type:"string",align:"left",sortable:!0}),t.push({name:"gcseGpa",label:"Gpa",field:"gcseGpa",type:"string",align:"left",sortable:!0})),this.metrics.IGDR.length,this.showBaselineData&&(this.subject.year>11?(t.push({name:"alisScore",label:"Alis",field:"alisBaseline",type:"string",align:"left",sortable:!0}),t.push({name:"alisPrediction",label:"Prediction",field:"alisPrediction",type:"string",align:"left",sortable:!0})):(t.push({name:"midyisScore",label:"Mdys",field:"midyisBaseline",type:"string",align:"left",sortable:!0}),t.push({name:"midyisPrediction",label:"Mdys Grade",field:"midyisPrediction",type:"string",align:"left",sortable:!0}))),t):t},showSwarm(){return!this.loading&&this.selectedWyapId&&this.swarmOpen},getSortBy(){return this.metrics&&this.metrics.ALevelMock.length>0?"aLevelMockRank":"set"},sorted(){var t=this.students.filter((function(t){return t.id>0}));return t.sort(this.$compare(this.sortKey,this.sortDir))},studentData(){var t=this,e=this.sorted.map((function(e){var s={id:e.id,displayName:e.displayName,classCode:e.classCode,boardingHouseCode:e.boardingHouseCode,schoolNumber:e.schoolNumber,midyisBaseline:e.midyisBaseline,midyisPrediction:e.midyisPrediction,alisPrediction:e.alisGcsePrediction,alisBaseline:e.alisGcseBaseline,gcseGpa:e.gcseGpa,gcseMockGpa:e.gcseMockGpa};if(!t.metrics)return s;var a=t.metrics.GCSEMock.find((function(t){return t.studentId===s.id}));a&&(s.gcseMockGrade=a.grade,s.gcseMockRank=a.cohortRank,s.gcseMockPercentage=a.percentage);var r=t.metrics.GCSE.find((function(t){return t.studentId===s.id}));r&&(s.gcseGrade=r.grade);var i=t.metrics.ALevelMock.find((function(t){return t.studentId===s.id}));i&&(s.aLevelMockGrade=i.grade,s.aLevelMockRank=i.cohortRank,s.aLevelMockPercentage=i.percentage);var n=t.metrics.IGDR.find((function(t){return t.studentId===s.id}));return n&&(s.gcseDelta=n.gcseDelta,s.IGDR=n.IGDR),s}));return e.sort(this.$compare(this.sortKey,this.sortDir))},columnCount(){return this.columns.filter((function(t){return!t.hidden})).length}},watch:{},components:{Swarm:Rt,Loading:x["a"],ClassTable:zt["a"]},created(){var t=this;this.subject=this.$store.getters["user/getGlobalSubject"],this.getMetrics(),this.subjectWatch=this.$store.watch((function(){return t.$store.getters["user/getGlobalSubject"]}),this.getMetrics),this.yearWatch=this.$store.watch((function(){return t.$store.getters["hod/activeYear"]}),this.getMetrics),this.examWatch=this.$store.watch((function(){return t.$store.getters["hod/activeExam"]}),this.getMetrics)},beforeDestroy(){this.subjectWatch&&this.subjectWatch(),this.yearWatch&&this.yearWatch(),this.examWatch&&this.examWatch()}},Kt=Ut,Xt=(s("e985"),s("3d3c")),Jt=s("f987"),Vt=s("e81c"),Zt=s("ebe6"),te=Object(k["a"])(Kt,$t,It,!1,null,"463ad538",null),ee=te.exports;function se(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),s.push.apply(s,a)}return s}function ae(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?se(Object(s),!0).forEach((function(e){o()(t,e,s[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):se(Object(s)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))}))}return t}L()(te,"components",{QBar:Yt["a"],QInput:At["a"],QIcon:ot["a"],QBtn:Bt["a"],QToggle:Xt["a"],QSpace:Nt["a"],QScrollArea:w["a"],QMarkupTable:j["a"],QTooltip:ct["a"],QBadge:Jt["a"],QDialog:Vt["a"],QCard:Zt["a"]});var re={name:"Page.HOD.Metrics",data(){return{elements_:[{name:"metrics",label:"All",component:ee},{name:"wyap",label:"wyap",component:m["a"],tooltip:"Whole Year Assessment Point"},{name:"classes",label:"classes",component:$},{name:"mlo",label:"mlo",component:ut},{name:"history",label:"history",component:Wt}]}},computed:ae(ae(ae({},Object(c["c"])("user",["getGlobalSubject"])),Object(c["c"])("hod",["activeYear"])),{},{elements(){var t=[{name:"history",label:"history",component:Wt}];return t=[],11===this.activeYear||13===this.activeYear?[].concat(n()(this.elements_),n()(t)):this.elements_}}),methods:ae({},Object(c["d"])("hod",["setActiveYear"])),components:{toolbarPage:h["a"],YearBar:d["a"],ExamBar:u["a"]},created(){var t=this;this.setActiveYear(13),this.subjectWatch=this.$store.watch((function(){return t.$store.getters["user/getGlobalSubject"]}),this.setClass),this.yearWatch=this.$store.watch((function(){return t.$store.getters["hod/activeYear"]}),this.setClass)},beforeDestroy(){this.subjectWatch&&this.subjectWatch(),this.yearWatch&&this.yearWatch()}},ie=re,ne=Object(k["a"])(ie,a,r,!1,null,null,null);e["default"]=ne.exports},f1e9:function(t,e,s){"use strict";var a=s("e4b7"),r=s.n(a);r.a},fbb2:function(t,e,s){}}]);