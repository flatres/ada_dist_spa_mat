(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[22],{"2a90":function(t,e,a){"use strict";var s=a("3efc"),n=a.n(s);n.a},"2d70":function(t,e,a){"use strict";var s=a("97f9"),n=a.n(s);n.a},"3efc":function(t,e,a){},"97f9":function(t,e,a){},b151:function(t,e,a){"use strict";var s=a("d2ac"),n=a.n(s);n.a},d2ac:function(t,e,a){},f840:function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("toolbar-page",{attrs:{elements:t.elements,default:"calendar"}})},n=[],l=a("08e9"),o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("q-page",{},[a("div",{staticClass:"row fit",staticStyle:{height:"90vh"}},[a("div",{staticClass:"col fit",staticStyle:{height:"90vh"}},[a("Calendar",{key:t.calIndex,ref:"calendar",staticStyle:{"min-height":"90vh"},attrs:{"week-start":"1",year:t.year,"enable-range-selection":!0,"data-source":t.calendarData,sync:""},on:{"click-day":t.clickDay,"year-changed":t.changeYear}})],1),a("div",{staticClass:"col-3 q-ml-md",staticStyle:{"min-width":"310px"}},[a("q-toggle",{attrs:{label:"Show Week A/B","left-label":"",color:"accent"},on:{input:t.calendarData},model:{value:t.showWeeks,callback:function(e){t.showWeeks=e},expression:"showWeeks"}}),t._l(t.terms,(function(e){return a("q-list",{key:e.id,staticClass:"rounded-borders q-mb-xs",attrs:{padding:"",bordered:""}},[a("q-expansion-item",{attrs:{dense:"","dense-toggle":"","expand-separator":"",label:e.name}},[a("q-card",[a("q-card-section",[a("div",{staticClass:"row"},[a("q-toggle",{attrs:{label:"Publish","left-label":"",color:"accent","true-value":1,"false-value":0},on:{input:t.save},model:{value:e.isPublished,callback:function(a){t.$set(e,"isPublished",a)},expression:"term.isPublished"}}),a("q-btn",{staticClass:"q-mt-sm q-ml-xl",staticStyle:{width:"120px",height:"25px"},attrs:{outline:"",color:"accent",label:"Update",dense:"",size:"sm"},on:{click:t.save}})],1),a("div",{staticClass:"row"},[a("q-input",{staticClass:"col q-mr-xs",attrs:{color:"font",dense:"",label:"Start",mask:"##-##-#### ##:##"},model:{value:e.start,callback:function(a){t.$set(e,"start",a)},expression:"term.start"}}),a("q-input",{staticClass:"col q-pl-xs",attrs:{color:"font",dense:"",label:"End",mask:"##-##-#### ##:##"},model:{value:e.end,callback:function(a){t.$set(e,"end",a)},expression:"term.end"}})],1),a("p",{staticClass:"text-font full-width bg-tertiary q-mt-md q-pl-xs q-mb-none"},[t._v("Half Term")]),a("div",{staticClass:"row"},[a("q-input",{staticClass:"col q-mr-xs",attrs:{color:"font",dense:"",label:"Start",mask:"##-##-#### ##:##"},model:{value:e.htStart,callback:function(a){t.$set(e,"htStart",a)},expression:"term.htStart"}}),a("q-input",{staticClass:"col q-ml-xs",attrs:{color:"font",dense:"",label:"End",mask:"##-##-#### ##:##"},model:{value:e.htEnd,callback:function(a){t.$set(e,"htEnd",a)},expression:"term.htEnd"}})],1),a("p",{staticClass:"text-font full-width bg-tertiary q-mt-md q-pl-xs q-mb-none"},[t._v("Exeat 1")]),a("div",{staticClass:"q-ml-md row"},[a("q-input",{staticClass:"col q-pr-xs",attrs:{color:"font",dense:"",label:"Start",mask:"##-##-#### ##:##"},model:{value:e.ex1Start,callback:function(a){t.$set(e,"ex1Start",a)},expression:"term.ex1Start"}}),a("q-input",{staticClass:"col q-ml-xs",attrs:{color:"font",dense:"",label:"End",mask:"##-##-#### ##:##"},model:{value:e.ex1End,callback:function(a){t.$set(e,"ex1End",a)},expression:"term.ex1End"}})],1),a("p",{staticClass:"text-font full-width bg-tertiary q-mt-md q-pl-xs q-mb-none"},[t._v("Exeat 2")]),a("div",{staticClass:"q-ml-md row"},[a("q-input",{staticClass:"col q-pr-xs",attrs:{color:"font",dense:"",label:"Start",mask:"##-##-#### ##:##"},model:{value:e.ex2Start,callback:function(a){t.$set(e,"ex2Start",a)},expression:"term.ex2Start"}}),a("q-input",{staticClass:"col q-ml-xs",attrs:{color:"font",dense:"",label:"End",mask:"##-##-#### ##:##"},model:{value:e.ex2End,callback:function(a){t.$set(e,"ex2End",a)},expression:"term.ex2End"}})],1)])],1)],1)],1)})),a("div",{staticClass:"q-mt-md"},[a("div",{staticClass:"row"},[a("q-input",{attrs:{dense:"",filled:"",mask:"##-##-####",rulesx:["date"]},scopedSlots:t._u([{key:"append",fn:function(){return[a("q-icon",{staticClass:"cursor-pointer",attrs:{name:"event"}},[a("q-popup-proxy",{ref:"qDateProxy",attrs:{"transition-show":"scale","transition-hide":"scale"}},[a("q-date",{attrs:{mask:"DD-MM-YYYY"},on:{input:function(){return t.$refs.qDateProxy.hide()}},model:{value:t.testDate,callback:function(e){t.testDate=e},expression:"testDate"}})],1)],1)]},proxy:!0}]),model:{value:t.testDate,callback:function(e){t.testDate=e},expression:"testDate"}}),a("q-input",{staticClass:"col q-ml-xs",attrs:{color:"font",filled:"",dense:"",mask:"##:##"},model:{value:t.testTime,callback:function(e){t.testTime=e},expression:"testTime"}})],1),a("q-btn",{staticClass:"q-mt-md full-width",attrs:{label:"test",color:"font-secondary",outline:"",dense:""},on:{click:t.test}}),a("span",{staticClass:"q-pt-lg"},[t._v(t._s(t.testResponse))])],1)],2)])])},r=[],c=(a("c880"),a("4fb0"),a("2cc0")),d=a.n(c),i=a("47783"),u={getTerms(t,e,a){i["a"].get("/admin/school/terms/"+a).then((function(e){t(e.data)})).catch((function(t){console.log(t)}))},putTerms(t,e,a){i["a"].put("/admin/school/terms",a).then((function(e){t(e.data)})).catch((function(t){console.log(t)}))},getPeriod(t,e,a){i["a"].get("/admin/school/period/"+a.date+"/"+a.time).then((function(e){t(e.data)})).catch((function(t){console.log(t)}))},getStudent(t,e,a){i["a"].get("/admin/school/student/ada/"+a).then((function(e){t(e.data)})).catch((function(t){console.log(t)}))},getIsamsStudent(t,e,a){i["a"].get("/admin/school/student/isams/"+a).then((function(e){t(e.data)})).catch((function(t){console.log(t)}))}},m=a("134d"),h={name:"Component.Admin.School.Calendar",props:{},data(){return{terms:[],newModeOn:!0,calIndex:0,year:null,eventId:0,showWeeks:!1,testDate:null,testTime:"09:00",testResponse:""}},methods:{test(){var t=this;u.getPeriod((function(e){console.log(e),t.testResponse=e}),this.$errorHandler,{date:this.testDate,time:this.testTime})},clickDay(t,e){console.log(t)},changeYear(t){var e=t.currentYear;e!==this.year&&(this.year=e,u.getTerms(this.processTerms,this.$errorHandler,e))},processTerms(t){this.terms=t,this.calendarData()},makeDate(t){if(!t)return null;var e=t.split(" ")[0],a=e.split("-")[0],s=e.split("-")[1],n=e.split("-")[2];return new Date(n,s-1,a)},calendarData(){var t=[],e="black",a=this;return this.terms.forEach((function(s,n){var l=s.isPublished?a.$hexPalette(n):m["a"].getBrand("font-secondary");a.showWeeks||t.push({name:s.name,startDate:a.makeDate(s.start),endDate:a.makeDate(s.end),color:l}),t.push({startDate:a.makeDate(s.htStart),endDate:a.makeDate(s.htEnd),color:e}),t.push({startDate:a.makeDate(s.htStart),endDate:a.makeDate(s.htEnd),color:e}),t.push({startDate:a.makeDate(s.htStart),endDate:a.makeDate(s.htEnd),color:e}),t.push({startDate:a.makeDate(s.ex1Start),endDate:a.makeDate(s.ex1End),color:e}),t.push({startDate:a.makeDate(s.ex1Start),endDate:a.makeDate(s.ex1End),color:e}),t.push({startDate:a.makeDate(s.ex1Start),endDate:a.makeDate(s.ex1End),color:e}),t.push({startDate:a.makeDate(s.ex2Start),endDate:a.makeDate(s.ex2End),color:e}),t.push({startDate:a.makeDate(s.ex2Start),endDate:a.makeDate(s.ex2End),color:e}),t.push({startDate:a.makeDate(s.ex2Start),endDate:a.makeDate(s.ex2End),color:e}),a.showWeeks&&s.weeks.forEach((function(e,s){"B"!==e.type&&"A"!==e.type||t.push({startDate:a.makeDate(e.wb),endDate:a.makeDate(e.we),color:"B"===e.type?m["a"].getBrand("positive"):m["a"].getBrand("accent")})}))})),this.$refs.calendar.calendar&&this.$refs.calendar.calendar.setDataSource(t),t},save(){var t=this;u.putTerms((function(e){t.terms=e,t.calendarData()}),this.$errorHandler,this.terms)}},computed:{},components:{Calendar:d.a},watch:{terms:{deep:!0,handler(){}}},created(){this.calendarData()}},p=h,f=(a("2d70"),a("2be6")),x=a("8c42"),D=a("3d3c"),b=a("6c93"),k=a("0f3b"),v=a("ebe6"),S=a("965d"),q=a("2ef0"),g=a("bc74"),w=a("34ff"),C=a("8c18"),y=a("88af"),E=a("e279"),$=a.n(E),I=Object(f["a"])(p,o,r,!1,null,"371527de",null),P=I.exports;$()(I,"components",{QPage:x["a"],QToggle:D["a"],QList:b["a"],QExpansionItem:k["a"],QCard:v["a"],QCardSection:S["a"],QBtn:q["a"],QInput:g["a"],QIcon:w["a"],QPopupProxy:C["a"],QDate:y["a"]});var _=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"col column"},[a("div",{staticClass:"row full-width q-mm-lg"},[a("students",{attrs:{id:t.selectedStudentId},on:{"update:id":function(e){t.selectedStudentId=e}}})],1),a("div",{staticClass:"col column scroll q-mb-xl q-mt-md bd-font",staticStyle:{"max-height":"75vh"}},[a("tree-view",{attrs:{data:t.student,options:{maxDepth:1}}})],1)])},T=[],Q=a("0082"),B={name:"Component.Admin.School.Calendar",props:{},data(){return{selectedStudentId:null,student:{}}},methods:{processStudent(t){this.student=t}},computed:{},components:{Students:Q["a"]},watch:{selectedStudentId(t){console.warn(t),u.getIsamsStudent(this.processStudent,this.$errorHandler,t)}},created(){}},W=B,Y=(a("b151"),Object(f["a"])(W,_,T,!1,null,"d86ced2a",null)),A=Y.exports,H=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"col"},[a("div",{staticClass:"row full-width q-mm-lg"},[a("students",{attrs:{id:t.selectedStudentId},on:{"update:id":function(e){t.selectedStudentId=e}}})],1),a("div",{staticClass:"row fit"},[a("tree-view",{attrs:{data:t.student,options:{maxDepth:1}}})],1)])},O=[],j={name:"Component.Admin.School.Calendar",props:{},data(){return{selectedStudentId:null,student:{}}},methods:{processStudent(t){this.student=t}},computed:{},components:{Students:Q["a"]},watch:{selectedStudentId(t){console.warn(t),u.getStudent(this.processStudent,this.$errorHandler,t)}},created(){}},M=j,R=(a("2a90"),Object(f["a"])(M,H,O,!1,null,"0818143a",null)),J=R.exports,z={name:"Page.Admin.School.Calendar",data(){return{elements:[{name:"calendar",label:"Calendar",component:P,shortcut:"s"},{name:"students",label:"students",component:J,shortcut:"s"},{name:"iSamsStudents",label:"iSams Students",component:A,shortcut:"s"}]}},components:{toolbarPage:l["a"]},methods:{refresh(){}}},L=z,U=Object(f["a"])(L,s,n,!1,null,null,null);e["default"]=U.exports}}]);