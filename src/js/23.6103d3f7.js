(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[23],{1327:function(e,t,n){"use strict";var a=n("1894"),l=n.n(a);l.a},1894:function(e,t,n){},"2a8f":function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("toolbar-page",{attrs:{elements:e.elements}})},l=[],s=n("08e9"),r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("crud",{ref:"crud",attrs:{data:e.data,api:e.api,columns:e.columns,searchx:"",sortBy:"timestamp"}})],1)},o=[],i=n("d612"),c=n("47783"),u={getFiles(e,t){c["a"].get("/exams/admin/files").then((function(t){e(t.data)})).catch((function(e){e()}))},getSessions(e,t){c["a"].get("/exams/admin/sessions").then((function(t){e(t.data)})).catch((function(e){e()}))},getSession(e,t,n){c["a"].get("/exams/admin/session/"+n.id).then((function(t){e(t.data)})).catch((function(e){e()}))},getAlevelSheet(e,t,n){c["a"].get("/exams/admin/alevelsheet/"+n.id).then((function(t){e(t.data)})).catch((function(e){e()}))},getSubjects(e,t){c["a"].get("/exams/admin/subjects").then((function(t){e(t.data)})).catch((function(e){e()}))},deleteAllCaches(e,t){c["a"].delete("/exams/admin/caches").then((function(t){e(t.data)})).catch((function(e){e()}))},deleteCache(e,t,n){c["a"].delete("/exams/admin/cache/"+n).then((function(t){e(t.data)})).catch((function(e){e()}))}},d={name:"ComponentExamsAdminFiles",data(){return{api:{get:u.getFiles},columns:[{name:"id",label:"id",field:"id",type:"string",align:"left",hidden:!0},{name:"cycle",label:"Cycle",field:"intCycle",sortable:!0},{name:"timestamp",label:"Time Stamp",field:"txtImportDateTime",sortable:!0},{name:"file",label:"File",field:"txtFilePath",sortable:!0}]}},computed:{},components:{Crud:i["a"]},created(){}},f=d,h=(n("e803"),n("2be6")),m=Object(h["a"])(f,r,o,!1,null,"053a0723",null),b=m.exports,p=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[e.consoleProgress<1?n("q-linear-progress",{staticClass:"q-my-sm",attrs:{value:e.consoleProgress,color:"primary",dark:""}}):e._e(),n("crud",{ref:"crud",attrs:{data:e.data,api:e.api,columns:e.columns,searchx:"",sortBy:"scode",indicator:"unknown"}})],1)},g=[],v=(n("e125"),n("4823"),n("2e73"),n("76d0"),n("8e9e")),y=n.n(v),C=n("9ce4");function O(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function j(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?O(Object(n),!0).forEach((function(t){y()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):O(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var x={name:"ComponentExamsAdminSubjects",data(){return{api:{get:u.getSubjects},columns:[{name:"id",label:"id",field:"id",type:"string",align:"left",hidden:!0},{name:"scode",label:"code",field:"subjectCode",sortable:!0},{name:"sname",label:"name",field:"subjectName",sortable:!0},{name:"title",label:"title",field:"title",sortable:!0},{name:"level",label:"level",field:"level",sortable:!0},{name:"sboard",label:"board",field:"boardName",sortable:!0},{name:"results",label:"results",field:"resultCount",sortable:!0}]}},computed:j(j({},Object(C["c"])("sockets",["progress"])),{},{consoleProgress(){return this.progress("Exams.Admin.Subjects")/100}}),components:{Crud:i["a"]},created(){}},S=x,A=(n("1327"),n("4f61")),P=n("e279"),E=n.n(P),q=Object(h["a"])(S,p,g,!1,null,"064540ec",null),w=q.exports;E()(q,"components",{QLinearProgress:A["a"]});var D=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("div",{staticClass:"row"},[n("q-btn",{staticClass:"q-mr-lg",attrs:{outline:"",color:"tertiary","text-color":"font",label:"Fetch All",disabled:e.running},on:{click:e.fetchAll}}),n("q-btn",{staticClass:"q-mr-lg",attrs:{outline:"",color:"tertiary","text-color":"font",label:"Fetch A Level",disabled:e.running},on:{click:e.fetchALevel}}),n("q-btn",{staticClass:"q-mr-lg",attrs:{outline:"",color:"tertiary","text-color":"font",label:"Fetch GSCE",disabled:e.running},on:{click:e.fetchGCSE}}),n("q-btn",{attrs:{dense:"",color:"red","text-color":"black",label:"Delete All",disabled:e.running},on:{click:e.deleteAll}})],1),n("crud",{ref:"crud",attrs:{data:e.data,actions:e.actions,api:e.api,columns:e.columns,searchx:"",sortBy:"intFormatYear",indicator:"intActive"},on:{gcse:e.gcse,alevel:e.alevel,alevelsheet:e.alevelSheet,both:e.both,deleteBoth:e.deleteBoth}}),e.console?n("div",[n("h1",[e._v(e._s(e.currentYear)+"....")]),n("console-component",{staticStyle:{"min-height":"400px"}})],1):e._e()],1)},F=[],k=n("de53"),Y=n("dd14");function _(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function $(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?_(Object(n),!0).forEach((function(t){y()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var I={name:"ComponentExamsAdminSessions",data(){return{api:{get:u.getSessions},queue:[],currentYear:"",console:!1,running:!1,columns:[{name:"id",label:"id",field:"id",type:"string",align:"left",hidden:!0},{name:"year",label:"Year",field:"intFormatYear"},{name:"month",label:"Month",field:"month"},{name:"files",label:"Files",field:"files"},{name:"gcseCache",label:"GCSE Cache",color:"red",truncate:!1,sortable:!0,colors:[{label:"cached",color:"green",textColor:"black"},{label:"none",color:"red",textColor:"black"}],field:"gcseCache",type:"badges",align:"left"},{name:"gcsetime",label:"",field:"gcseCacheTime"},{name:"alevelCache",label:"A Level Cache",color:"red",truncate:!1,sortable:!0,colors:[{label:"cached",color:"green",textColor:"black"},{label:"none",color:"red",textColor:"black"}],field:"alevelCache",type:"badges",align:"left"},{name:"aleveltime",label:"",field:"alevelCacheTime"}],actions:[{title:"Run GCSE",event:"gcse",icon:"fal fa-sort-numeric-up"},{title:"Run A Level",event:"alevel",icon:"fal fa-sort-shapes-up"},{title:"A LevelSpreadsheet",event:"alevelsheet",icon:"fal fa-file-spreadsheet"},{title:"Run All",event:"both",icon:"fal fa-share-all"},{title:"Delete Both",event:"deleteBoth",icon:"fal fa-trash"}]}},computed:{},methods:$($({},Object(C["b"])("sockets",["clearConsoleLog"])),{},{alevelSheet(e){u.getAlevelSheet((function(e){console.log(e)}),null,{id:e.id})},deleteBoth(e){var t=this;u.deleteCache((function(){t.$refs.crud.get(e.id)}),null,e.id)},gcse(e){this.queue.push({level:"gcse",sessionID:e.id,year:e.intFormatYear}),this.run()},alevel(e){this.queue.push({level:"alevel",sessionID:e.id,year:e.intFormatYear}),this.run()},both(e){this.queue.push({level:"alevel",sessionID:e.id,year:e.intFormatYear}),this.queue.push({level:"gcse",sessionID:e.id,year:e.intFormatYear}),this.run()},run(){var e=this;if(this.queue.length>0){this.clearConsoleLog(),this.running=!0,this.console=!0;var t=this.queue.pop();this.currentYear=t.year,k["a"].getSession((function(n){e.$refs.crud.get(t.sessionID),console.log(n.data.statistics),e.run()}),this.run,t)}else this.console=!1,this.running=!1,this.currentYear=""},fetchAll(){var e=this,t=this.$refs.crud.data;t.forEach((function(t){e.queue.push({level:"gcse",sessionID:t.id,year:t.intFormatYear}),e.queue.push({level:"alevel",sessionID:t.id,year:t.intFormatYear})})),this.run()},fetchGCSE(){var e=this,t=this.$refs.crud.data;t.forEach((function(t){e.queue.push({level:"gcse",sessionID:t.id,year:t.intFormatYear})})),this.run()},fetchALevel(){var e=this,t=this.$refs.crud.data;t.forEach((function(t){e.queue.push({level:"alevel",sessionID:t.id,year:t.intFormatYear})})),this.run()},deleteAll(){var e=this;u.deleteAllCaches((function(){e.$refs.crud.get()}),(function(){e.$refs.crud.get()}))}}),components:{Crud:i["a"],ConsoleComponent:Y["a"]},created(){}},B=I,L=(n("f19b"),n("2ef0")),G=Object(h["a"])(B,D,F,!1,null,"54eb25ca",null),T=G.exports;E()(G,"components",{QBtn:L["a"]});var R={name:"PageExamsAdmin",data(){return{elements:[{name:"files",label:"files",component:b},{name:"subjects",label:"subjects",component:w},{name:"sessions",label:"sessions",component:T}]}},components:{toolbarPage:s["a"]}},J=R,N=Object(h["a"])(J,a,l,!1,null,null,null);t["default"]=N.exports},"3f41":function(e,t,n){},e803:function(e,t,n){"use strict";var a=n("3f41"),l=n.n(a);l.a},efbd:function(e,t,n){},f19b:function(e,t,n){"use strict";var a=n("efbd"),l=n.n(a);l.a}}]);